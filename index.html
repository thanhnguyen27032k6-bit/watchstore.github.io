<!-- Xu h∆∞·ªõng 2025: hi·ªÉn th·ªã s·∫£n ph·∫©m, t√¨m ki·∫øm, xem chi ti·∫øt -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WatchStore - Trang ch·ªß</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/modal.css" />

    <style>
      /* Header Icons Styles gi·ªëng cart.html */
      .header-icons {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .icon-wrapper {
        position: relative;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .icon-wrapper i {
        font-size: 22px;
        color: #333;
        transition: color 0.3s;
      }

      .icon-wrapper:hover i {
        color: #ff7b00;
      }

      .badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #ff7b00;
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      /* User info styles */
      .user-info {
        display: flex;
        align-items: center;
        background: rgba(255, 123, 0, 0.1);
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid rgba(255, 123, 0, 0.2);
        margin-right: 15px;
      }

      .user-info span {
        font-weight: bold;
        color: #333;
      }

      .logout-btn {
        margin-left: 10px;
        padding: 4px 8px;
        background: #ff6b6b;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 11px;
        transition: background 0.3s;
      }

      .logout-btn:hover {
        background: #ff5252;
      }

      /* Notification styles */
      .login-required-notification:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }

      /* Animation cho notification */
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      /* Styles cho c√°c n√∫t b·ªã v√¥ hi·ªáu h√≥a */
      .compare-btn:disabled,
      .compare-btn[disabled] {
        cursor: not-allowed !important;
        opacity: 0.6 !important;
        background-color: #ccc !important;
      }

      .btn-cart:disabled,
      .btn-cart[disabled] {
        cursor: not-allowed !important;
        opacity: 0.6 !important;
        background-color: #ccc !important;
      }

      .btn-buy:disabled,
      .btn-buy[disabled] {
        cursor: not-allowed !important;
        opacity: 0.6 !important;
        background-color: #ccc !important;
      }

      /* Tooltip cho c√°c n√∫t b·ªã v√¥ hi·ªáu h√≥a */
      .compare-btn[title]:hover::after,
      .btn-cart[title]:hover::after,
      .btn-buy[title]:hover::after {
        content: attr(title);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
        z-index: 1000;
        margin-bottom: 5px;
      }

      /* ƒê·∫£m b·∫£o n√∫t ƒëƒÉng nh·∫≠p hi·ªÉn th·ªã ƒë√∫ng */
      #login-icon-wrapper {
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      #login-icon-wrapper:hover {
        color: #ff7b00;
      }

      #login-icon-wrapper:hover i {
        color: #ff7b00;
      }

      .login-text {
        font-size: 14px;
        margin-left: 5px;
        font-weight: 500;
      }

      /* Responsive cho header icons */
      @media (max-width: 768px) {
        .header-icons {
          gap: 15px;
        }

        .icon-wrapper i {
          font-size: 20px;
        }

        .badge {
          width: 16px;
          height: 16px;
          font-size: 10px;
          top: -6px;
          right: -6px;
        }

        .user-info {
          margin-right: 10px;
          padding: 6px 8px;
        }

        .user-info span {
          font-size: 14px;
        }

        .logout-btn {
          font-size: 10px;
          padding: 3px 6px;
        }

        .login-text {
          display: none;
        }

        #login-icon-wrapper i {
          font-size: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header  -->
    <header class="header">
      <div class="header-top">
        <span
          >Kh√°m ph√° b·ªô s∆∞u t·∫≠p ƒë·ªìng h·ªì th·ªùi th∆∞·ª£ng cho nam v√† n·ªØ tinh t·∫ø trong
          t·ª´ng chi ti·∫øt, ƒë·∫≥ng c·∫•p c√πng th·ªùi gian.</span
        >
      </div>
      <div class="header-main">
        <div class="container">
          <!-- inner wrap dung de boc display flex dan hang ngang -->
          <div class="inner-wrap">
            <div class="inner-logo">
              <a href="/">
                <img src="image/banner/logo-remove.png" />
                <span>WatchStore</span>
              </a>
            </div>
            <div class="inner-menu">
              <ul id="inner-menu">
                <li><a href="#" id="xuhuong-link">Xu h∆∞·ªõng 2025</a></li>
                <li><a href="#" id="nam-link">Nam</a></li>
                <li><a href="#" id="nu-link">N·ªØ</a></li>
              </ul>
            </div>

            <div class="inner-search">
              <input type="text" id="search-input" placeholder="T√¨m l√† th·∫•y" />
              <button id="search-button">
                <i class="fa-solid fa-magnifying-glass"></i>
              </button>

              <!-- Th√™m ph·∫ßn hi·ªÉn th·ªã user info -->
              <div class="user-info" id="userInfo" style="display: none">
                <span id="userName"></span>
                <button class="logout-btn" id="logoutBtn">ƒêƒÉng xu·∫•t</button>
              </div>

              <!-- Th√™m v√†o ph·∫ßn header-icons trong header -->
              <div class="header-icons">
                <!-- Th√™m n√∫t ƒëƒÉng nh·∫≠p -->
                <div class="icon-wrapper" id="login-icon-wrapper">
                  <i class="fas fa-user"></i>
                  <span class="login-text">ƒêƒÉng nh·∫≠p</span>
                </div>

                <div class="icon-wrapper" id="wishlist-icon">
                  <i class="far fa-heart"></i>
                  <div class="badge" id="wishlist-count">0</div>
                </div>
                <div class="icon-wrapper" id="cart-icon">
                  <i class="fas fa-shopping-cart"></i>
                  <div class="badge" id="cart-count">0</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- End Header  -->

    <!-- Banner  -->
    <div class="banner">
      <div class="slides s1">
        <div
          class="slide"
          style="background-image: url('image/banner/banner-tieu-rolex-pc.jpg')"
        ></div>
        <div
          class="slide"
          style="
            background-image: url('image/banner/carnivial-chi-tu-3-trieu.webp');
          "
        ></div>
        <div
          class="slide"
          style="
            background-image: url('image/banner/banner-dong-ho-20-10-1.jpg');
          "
        ></div>
      </div>

      <div class="navigation">
        <ul>
          <li class="kichhoat"></li>
          <li></li>
          <li></li>
        </ul>
      </div>
    </div>

    <!-- End Banner -->

    <!-- B·∫£o ƒë·∫£m  -->
    <section class="service-banner">
      <div class="service-item">
        <div class="icon"><i class="fa-solid fa-layer-group"></i></div>
        <div class="content">
          <h4>M·∫´u m√£ ƒëa d·∫°ng nh·∫•t</h4>
          <p>Ho√†n ti·ªÅn n·∫øu ph√°t hi·ªán b√°n h√†ng gi·∫£</p>
        </div>
      </div>

      <div class="service-item">
        <div class="icon"><i class="fa-solid fa-rocket"></i></div>
        <div class="content">
          <h4>Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn</h4>
          <p>Giao h√†ng nhanh, ƒë√≥ng g√≥i c·∫©n th·∫≠n</p>
        </div>
      </div>

      <div class="service-item">
        <div class="icon"><i class="fa-solid fa-right-left"></i></div>
        <div class="content">
          <h4>ƒê·ªïi h√†ng 7 ng√†y</h4>
          <p>1 ƒë·ªïi 1 trong 7 ng√†y v·ªõi s·∫£n ph·∫©m l·ªói</p>
        </div>
      </div>

      <div class="service-item">
        <div class="icon"><i class="fa-solid fa-shield"></i></div>
        <div class="content">
          <h4>B·∫£o h√†nh 5 nƒÉm</h4>
          <p>Th·ªß t·ª•c nhanh g·ªçn, thay pin mi·ªÖn ph√≠</p>
        </div>
      </div>

      <div class="service-item">
        <div class="icon"><i class="fa-solid fa-check-double"></i></div>
        <div class="content">
          <h4>ƒêeo tr∆∞·ªõc tr·∫£ sau</h4>
          <p>Ho√†n ti·ªÅn n·∫øu ph√°t hi·ªán b√°n h√†ng gi·∫£</p>
        </div>
      </div>
    </section>
    <!-- End B·∫£o ƒë·∫£m  -->

    <!-- Page home  -->
    <section id="home" class="page"></section>
    <!-- End Page home  -->

    <!--Section Search-->
    <section id="search" class="page hidden">
      <div class="container" style="padding-bottom: 50px">
        <h2 style="text-align: center; margin-bottom: 30px">
          K·∫æT QU·∫¢ T√åM KI·∫æM
        </h2>
        <div id="search-results-container" class="product-list">
          <p
            id="no-results"
            style="text-align: center; width: 100%; display: none"
          >
            Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o ph√π h·ª£p.
          </p>
        </div>
      </div>
    </section>
    <!--End Section Search-->

    <!--Section c·ªßa H√£ng-->
    <section id="brand-detail" class="page hidden">
      <div class="container" style="padding-bottom: 50px">
        <h2
          id="brand-title"
          style="text-align: center; margin-bottom: 30px"
        ></h2>
        <div id="brand-products-container" class="product-list"></div>
        <p
          id="no-brand-products"
          style="text-align: center; width: 100%; display: none"
        >
          Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o c·ªßa h√£ng n√†y.
        </p>
      </div>
    </section>
    <!--End Section c·ªßa H√£ng-->

   <!-- Page Xu h∆∞·ªõng -->
<section id="xuhuong" class="page">
  <div class="container">
    <h1 class="page-title-main">Xu h∆∞·ªõng 2025</h1>
  </div>
  <!--L·ªãch s·ª≠ xem-->
  <section class="container viewed-history-section hidden-history" style="padding-top: 50px; padding-bottom: 20px;">
      <div class="container"> 
          <div class="history-header">
              <h2 class="history-title">S·∫£n ph·∫©m ƒë√£ xem</h2>
              
              <button class="clear-history-button" style="display: none;">X√≥a l·ªãch s·ª≠</button>
          </div>
          
          <div class="viewed-products-container product-list" style="justify-content: flex-start; flex-wrap: nowrap; overflow-x: auto; padding-bottom: 20px;">
              </div>
          
          <p class="no-history-message" style="text-align: center; padding: 20px 0; display: none;">
            B·∫°n ch∆∞a xem s·∫£n ph·∫©m n√†o.
          </p>
      </div> 
  </section>

  <div class="filter-options">
      <div class="filter-group">
        <label for="price-filter-xuhuong">Gi√°:</label>
        <select id="price-filter-xuhuong" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="<1M">D∆∞·ªõi 1 tri·ªáu</option>
          <option value="1M-3M">1 - 3 tri·ªáu</option>
          <option value="3M-5M">3 - 5 tri·ªáu</option>
          <option value=">5M">Tr√™n 5 tri·ªáu</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="brand-filter-xuhuong">H√£ng:</label>
        <select id="brand-filter-xuhuong" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Casio">Casio</option>
          <option value="Orient">Orient</option>
          <option value="Seiko">Seiko</option>
          <option value="Tissot">Tissot</option>
          <option value="Citizen">Citizen</option>
          <option value="Bentley">Bentley</option>
          <option value="Olym Pianus">Olym Pianus</option>
          <option value="Bonest Gatti">Bonest Gatti</option>
          <option value="Carnival">Carnival</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="movement-filter-xuhuong">B·ªô m√°y:</label>
        <select id="movement-filter-xuhuong" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Automatic">Automatic (C∆°)</option>
          <option value="Quartz">Quartz (Pin)</option>
          <option value="Hybrid">Hybrid</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="water-filter-xuhuong">Ch·ªëng n∆∞·ªõc:</label>
        <select id="water-filter-xuhuong" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="30m">30m (R·ª≠a tay)</option>
          <option value="50m">50m (ƒêi m∆∞a)</option>
          <option value="100m">100m (B∆°i l·ªôi)</option>
          <option value="200m">200m (L·∫∑n)</option>
        </select>
      </div>
    </div>
    </div>

  <div id="xuhuong-products" class="product-list product-list-container"></div>
</section>

<!-- ƒê·ªìng h·ªì Nam -->
<section id="nam" class="page">
  <div class="container">
    <h1 class="page-title-main">ƒê·ªìng H·ªì Nam <span class="badge-chinhhang"><i class="fa-solid fa-star"></i> 100% ch√≠nh h√£ng</span></h1>
  </div>
  <!--L·ªãch s·ª≠ xem-->
  <section class="container viewed-history-section hidden-history" style="padding-top: 50px; padding-bottom: 20px;">
      <div class="container"> 
          <div class="history-header">
              <h2 class="history-title">S·∫£n ph·∫©m ƒë√£ xem</h2>
              
              <button class="clear-history-button" style="display: none;">X√≥a l·ªãch s·ª≠</button>
          </div>
          
          <div class="viewed-products-container product-list" style="justify-content: flex-start; flex-wrap: nowrap; overflow-x: auto; padding-bottom: 20px;">
              </div>
          
          <p class="no-history-message" style="text-align: center; padding: 20px 0; display: none;">
            B·∫°n ch∆∞a xem s·∫£n ph·∫©m n√†o.
          </p>
      </div> 
  </section>

  <div class="filter-options">
      <div class="filter-group">
        <label for="price-filter-nam">Gi√°:</label>
        <select id="price-filter-nam" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="<1M">D∆∞·ªõi 1 tri·ªáu</option>
          <option value="1M-3M">1 - 3 tri·ªáu</option>
          <option value="3M-5M">3 - 5 tri·ªáu</option>
          <option value=">5M">Tr√™n 5 tri·ªáu</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="brand-filter-nam">H√£ng:</label>
        <select id="brand-filter-nam" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Casio">Casio</option>
          <option value="Orient">Orient</option>
          <option value="Seiko">Seiko</option>
          <option value="Tissot">Tissot</option>
          <option value="Citizen">Citizen</option>
          <option value="Bentley">Bentley</option>
          <option value="Olym Pianus">Olym Pianus</option>
          <option value="Bonest Gatti">Bonest Gatti</option>
          <option value="Carnival">Carnival</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="movement-filter-nam">B·ªô m√°y:</label>
        <select id="movement-filter-nam" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Automatic">Automatic (C∆°)</option>
          <option value="Quartz">Quartz (Pin)</option>
          <option value="Hybrid">Hybrid</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="water-filter-nam">Ch·ªëng n∆∞·ªõc:</label>
        <select id="water-filter-nam" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="30m">30m (R·ª≠a tay)</option>
          <option value="50m">50m (ƒêi m∆∞a)</option>
          <option value="100m">100m (B∆°i l·ªôi)</option>
          <option value="200m">200m (L·∫∑n)</option>
        </select>
      </div>
    </div>
    </div>

  <div class="product-list product-list-container" id="nam-products"></div>
</section>


 <!-- ƒê·ªìng h·ªì N·ªØ -->
<section id="nu" class="page">

  
  <div class="container">
    <h1 class="page-title-main">ƒê·ªìng H·ªì N·ªØ <span class="badge-chinhhang"><i class="fa-solid fa-star"></i> 100% ch√≠nh h√£ng</span></h1>
  </div>
  <!--L·ªãch s·ª≠ xem-->
  <section class="container viewed-history-section hidden-history" style="padding-top: 50px; padding-bottom: 20px;">
    <div class="container"> 
        <div class="history-header">
            <h2 class="history-title">S·∫£n ph·∫©m ƒë√£ xem</h2>
            
            <button class="clear-history-button" style="display: none;">X√≥a l·ªãch s·ª≠</button>
        </div>
        
        <div class="viewed-products-container product-list" style="justify-content: flex-start; flex-wrap: nowrap; overflow-x: auto; padding-bottom: 20px;">
            </div>
        
        <p class="no-history-message" style="text-align: center; padding: 20px 0; display: none;">
          B·∫°n ch∆∞a xem s·∫£n ph·∫©m n√†o.
        </p>
    </div> 
</section>

  <div class="filter-options">
      <div class="filter-group">
        <label for="price-filter-nu">Gi√°:</label>
        <select id="price-filter-nu" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="<1M">D∆∞·ªõi 1 tri·ªáu</option>
          <option value="1M-3M">1 - 3 tri·ªáu</option>
          <option value="3M-5M">3 - 5 tri·ªáu</option>
          <option value=">5M">Tr√™n 5 tri·ªáu</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="brand-filter-nu">H√£ng:</label>
        <select id="brand-filter-nu" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Casio">Casio</option>
          <option value="Orient">Orient</option>
          <option value="Seiko">Seiko</option>
          <option value="Tissot">Tissot</option>
          <option value="Citizen">Citizen</option>
          <option value="Bentley">Bentley</option>
          <option value="Olym Pianus">Olym Pianus</option>
          <option value="Bonest Gatti">Bonest Gatti</option>
          <option value="Carnival">Carnival</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="movement-filter-nu">B·ªô m√°y:</label>
        <select id="movement-filter-nu" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="Automatic">Automatic (C∆°)</option>
          <option value="Quartz">Quartz (Pin)</option>
          <option value="Hybrid">Hybrid</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="water-filter-nu">Ch·ªëng n∆∞·ªõc:</label>
        <select id="water-filter-nu" class="filter-select">
          <option value="">T·∫•t c·∫£</option>
          <option value="30m">30m (R·ª≠a tay)</option>
          <option value="50m">50m (ƒêi m∆∞a)</option>
          <option value="100m">100m (B∆°i l·ªôi)</option>
          <option value="200m">200m (L·∫∑n)</option>
        </select>
      </div>
    </div>
    </div>

  <div class="product-list product-list-container" id="nu-products"></div>
</section>

  <!-- Hot Sale -->  
  <div class="hotsale-product">
    <div class="banner-hotsale" style="background-image: url('image/banner/banner-xu-huong-home.jpg')"></div>
    <div class="product-list" id="hotsale-products"></div>
  </div>
<section class="product-section">
  <div class="section-header">
    <h2 class="text">ƒê·ªíNG H·ªí ƒêEO TAY CH√çNH H√ÉNG</h2>
    <p><a href="#">WatchStore</a> cung c·∫•p ƒëa d·∫°ng m·∫´u ƒë·ªìng h·ªì theo nhi·ªÅu phong c√°ch kh√°c nhau</p>
  </div>

  <div class="hotsale-banner">
    <button class="hotsale-btn">CASIO M√ôA H√à 2025 GI·∫¢M GI√Å SHOCK 45% - FLASH SALES</button>
  </div>

  <div class="product-categories">
    <a href="#" class="brand-link" data-brand="Tissot">
        <div class="category-item">
            <img src="image/SPNOIBAT/small-web-banner-tissot_1725589299.webp" alt="Tissot sang tr·ªçng">
            <p>Tissot sang tr·ªçng</p>
        </div>
    </a>

    <a href="#" class="brand-link" data-brand="Casio">
        <div class="category-item">
            <img src="image/SPNOIBAT/small-web-banner-casio-mtp_1725589299.webp" alt="Baby-G c√° t√≠nh">
            <p>Casio MTP thanh l·ªãch</p>
        </div>
    </a>

    <a href="#" class="brand-link" data-brand="G-Shock">
        <div class="category-item">
            <img src="image/SPNOIBAT/small-web-banner-g-shock_1725589299.webp" alt="G-Shock th·ªÉ thao">
            <p>G-Shock th·ªÉ thao</p>
        </div>
    </a> 

    <a href="#" class="brand-link" data-brand="Rolex">
        <div class="category-item">
            <img src="image/SPNOIBAT/small-web-banner-giong-rolex_1725589710.webp" alt="Rolex">
            <p>Gi·ªëng Rolex</p>
        </div>
    </a>
    <!-- ... th√™m c√°c item kh√°c -->
  </div>
</section>
    <!-- Gi·ªõi thi·ªáu c·ª≠a h√†ng  -->
    <section class="about-section">
      <div class="about-container">
        <div class="about-image">
          <img
            src="image/banner/gioithieu-home-desktop_1711705731.webp"
            alt="WatchStore - ƒê·ªìng h·ªì ch√≠nh h√£ng"
          />
        </div>

        <div class="about-content">
          <img
            src="image/banner/logo-remove.png"
            alt="WatchStore logo"
            class="about-logo"
          />
          <h2 class="about-title">C·ª¨A H√ÄNG ƒê·ªíNG H·ªí ƒêEO TAY CH√çNH H√ÉNG</h2>

          <p>
            ƒê∆∞·ª£c th√†nh l·∫≠p v√†o nƒÉm 2020, tr·∫£i qua 4 nƒÉm ho·∫°t ƒë·ªông v√† ph√°t tri·ªÉn,
            chu·ªói c·ª≠a h√†ng Chuy√™n b√°n ƒê·ªìng h·ªì ch√≠nh h√£ng WatchStore tr·ªü th√†nh
            ƒë·∫°i l√Ω ·ªßy quy·ªÅn cho r·∫•t nhi·ªÅu th∆∞∆°ng hi·ªáu ƒë·∫øn t·ª´ Nh·∫≠t B·∫£n v√† Th·ª•y
            S·ªπ.
          </p>

          <p>
            Ch√≠nh s√°ch b·∫£o h√†nh 5 nƒÉm c√πng v·ªõi c√°c ch∆∞∆°ng tr√¨nh gi·∫£m gi√° t·ªët s·∫Ω
            gi√∫p b·∫°n mua s·∫Øm d·ªÖ d√†ng. V·ªõi ƒë·ªôi ng≈© nh√¢n vi√™n t·∫≠n t√¨nh, am hi·ªÉu
            ki·∫øn th·ª©c, WatchStore r·∫•t vui ƒë∆∞·ª£c ph·ª•c v·ª• qu√Ω kh√°ch.
          </p>

          <p>
            WatchStore h·ª©a s·∫Ω ho√†n thi·ªán h∆°n m·ªói ng√†y ƒë·ªÉ mang ƒë·∫øn tr·∫£i nghi·ªám
            tuy·ªát v·ªùi nh·∫•t c√≥ th·ªÉ cho m·ªçi kh√°ch h√†ng. Ch√∫c qu√Ω kh√°ch m·ªçi ƒëi·ªÅu
            t·ªët l√†nh!
          </p>
        </div>
      </div>
    </section>

    <hr style="margin: 50px; box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.1)" />

    <!-- End Gi·ªõi thi·ªáu c·ª≠a h√†ng  -->

    <!-- 3 n√∫t n·ªïi g√≥c ph·∫£i -->
    <div class="floating-buttons">
      <a href="https://www.facebook.com/" class="btn-facebook" target="_blank"
        ><i class="fa-brands fa-facebook"></i
      ></a>
      <a
        href="https://www.facebook.com/messages/e2ee/t/8558612500825076/"
        class="btn-mess"
        target="_blank"
        ><i class="fa-brands fa-facebook-messenger"></i
      ></a>
      <a href="0999111555" class="btn-top" target="_blank"
        ><i class="fa-solid fa-phone"></i
      ></a>
    </div>
    <!-- End 3 n√∫t n·ªïi g√≥c ph·∫£i -->

    <!-- ƒê√°nh gi√° c·ªßa kh√°nh h√†ng -->

    <section class="review-section">
      <h2 class="review-title">ƒê√ÅNH GI√Å C·ª¶A KH√ÅCH H√ÄNG</h2>
      <p class="review-subtitle">
        WatchStore t·ª± h√†o l√† website c√≥ l∆∞·ª£ng ƒë√°nh gi√° nhi·ªÅu nh·∫•t t·∫°i Vi·ªát Nam
      </p>

      <div class="review-container">
        <div class="review-card">
          <img src="image/ƒê√ÅNH GI√Å/danh-gia-home-4.webp" alt="ƒê√°nh gi√° 1" />
          <p>ƒê·ªìng h·ªì ƒë·∫πp, nh√¢n vi√™n t∆∞ v·∫•n d·ªÖ th∆∞∆°ng.</p>
          <div class="review-info">
            <div class="review-avatar">üë§</div>
            <div>
              <strong>ƒê·ª©c</strong><br />
              <span class="review-status">‚úÖ ƒê√£ mua t·∫°i Watchstore</span>
            </div>
          </div>
        </div>

        <div class="review-card">
          <img src="image/ƒê√ÅNH GI√Å/danh-gia-home-2.webp" alt="ƒê√°nh gi√° 2" />
          <p>ƒê·∫πp nh∆∞ng kh√¥ng nghƒ© n√≥ b√© nh∆∞ v·∫≠y.</p>
          <div class="review-info">
            <div class="review-avatar">üë§</div>
            <div>
              <strong>Tu·∫•n Anh</strong><br />
              <span class="review-status">‚úÖ ƒê√£ mua t·∫°i Watchstore</span>
            </div>
          </div>
        </div>

        <div class="review-card">
          <img src="image/ƒê√ÅNH GI√Å/danh-gia-home-3.webp" alt="ƒê√°nh gi√° 3" />
          <p>
            S·∫£n ph·∫©m kƒ© v·∫øt, ƒë√≥ng g√≥i ch·ªânh chu, ƒëem t·∫∑ng tho·∫£i m√°i, con g√† m√°i
            lu√¥n nha mn...
          </p>
          <div class="review-info">
            <div class="review-avatar">üë§</div>
            <div>
              <strong>H√πng kh√≥i l·ª≠a hp</strong><br />
              <span class="review-status">‚úÖ ƒê√£ mua t·∫°i Watchstore</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- End ƒê√°nh gi√° c·ªßa kh√°nh h√†ng -->

    <!-- footer  -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-column">
          <h3>V·ªÄ CH√öNG T√îI</h3>
          <ul>
            <li><a href="#">Gi·ªõi thi·ªáu v·ªÅ WatchStore</a></li>
            <li><a href="#">Ph·∫£n √°nh - Khi·∫øu n·∫°i</a></li>
            <li><a href="#">Ch·ª©ng nh·∫≠n ƒë·∫°i l√Ω</a></li>
            <li><a href="#">Tin t·ª©c c√¥ng ty</a></li>
            <li><a href="#">Top list ƒë·ªìng h·ªì</a></li>
            <li><a href="#">Ki·∫øn th·ª©c ƒë·ªìng h·ªì</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>CH√çNH S√ÅCH CHUNG</h3>
          <ul>
            <li><a href="#">ƒêi·ªÅu kho·∫£n thanh to√°n</a></li>
            <li><a href="#">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
            <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
            <li><a href="#">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
            <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
            <li><a href="#">Th√¥ng tin c√°c trang TMƒêT</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3 class="highlight">H·ªÜ TH·ªêNG C·ª¨A H√ÄNG</h3>
          <p>
            <i class="fa-solid fa-shop"></i> C·ª≠a h√†ng A: 1 ƒê∆∞·ªùng Hoa Mai,Qu·∫≠n A
          </p>
          <p>
            <i class="fa-solid fa-shop"></i> C·ª≠a h√†ng B: 4 ƒê∆∞·ªùng Hoa C√∫c,Qu·∫≠n B
          </p>
          <p>
            <i class="fa-solid fa-shop"></i> C·ª≠a h√†ng C: 7 ƒê∆∞·ªùng Hoa Tulp,Qu·∫≠n C
          </p>
          <p>
            <i class="fa-solid fa-shop"></i> C·ª≠a h√†ng D: 9 ƒê∆∞·ªùng Hoa Lan,Qu·∫≠n D
          </p>
          <p style="color: wheat">
            M·ªü c·ª≠a: 8h00 - 22h00 | T·∫•t c·∫£ c√°c ng√†y trong tu·∫ßn
          </p>
        </div>

        <!-- C·ªôt 4: Li√™n h·ªá -->
        <div class="footer-column">
          <h3>LI√äN H·ªÜ H·ªñ TR·ª¢</h3>
          <p>Hotline 1: 0900 111 222</p>
          <p>Hotline 2: 0900 333 444</p>
          <p>Email: contact@abcdstore</p>

          <h3>THEO D√ïI CH√öNG T√îI</h3>
          <div class="social-icons">
            <a href="https://www.facebook.com/thanhphu000?locale=vi_VN"
              ><i class="fab fa-facebook"></i
            ></a>
            <a href="https://www.youtube.com/"
              ><i class="fab fa-youtube"></i
            ></a>
            <a href="https://www.tiktok.com/en/"
              ><i class="fab fa-tiktok"></i
            ></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>
          ¬©2020-2025 by WatchStore. Hotline: 093.335.553 Gi·∫•y ch·ª©ng nh·∫≠n kinh
          doanh s·ªë: HKD WATCHSTORE - 111MB55533.
        </p>
      </div>
    </footer>
    <!--thanh so s√°nh-->
    <div
      id="compareBar"
      class="compare-bar hidden overlay-check"
      aria-hidden="true"
    >
      <div class="compare-items" id="compareItems"></div>
      <div style="display: flex; align-items: center">
        <button class="btn-primary" id="compareNowBtn">So s√°nh ngay</button>
        <button class="btn-clear" id="clearAllBtn">X√≥a t·∫•t c·∫£</button>
      </div>
    </div>
    <!-- end thanh so s√°nh-->
    <!-- Font Awesome Icons -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"> -->

    <!-- ===================== PRODUCT DETAIL MODAL ===================== -->
    <div id="productDetailModal" class="product-modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
    
        <div class="product-detail-container">
          <div class="left-section">
            <img id="modalProductImage" src="" alt="" />
          </div>
    
          <div class="right-section">
            <h2 id="modalProductName"></h2>
    
            <div class="price-box">
              <span id="modalCurrentPrice" class="current-price"></span>
              <span id="modalOldPrice" class="old-price"></span>
            </div>
    
            <!-- ‚≠ê Th√™m m√¥ t·∫£ s·∫£n ph·∫©m -->
            <p id="modalDescription" class="product-description"></p>
    
           
    
            <div class="btn-box">
              <button class="btn-buy">MUA NGAY</button>
              <button class="btn-cart">TH√äM V√ÄO GI·ªé</button>
            </div>


            <div class="benefit-box">
              <ul >
                <li>‚úÖ 100% s·∫£n ph·∫©m ch√≠nh h√£ng</li>
                <li>üîÅ ƒê·ªïi tr·∫£ trong 3 ng√†y n·∫øu l·ªói</li>
                <li>üöö Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn to√†n qu·ªëc</li>
                <li>‚ö° Giao h√†ng h·ªèa t·ªëc trong ng√†y</li>
              </ul>
            </div>
          </div>
        </div>
    
        <div class="specs-section">
          <h3>Th√¥ng s·ªë s·∫£n ph·∫©m</h3>
          <table class="specs-table" id="specsTable"></table>
        </div>
      </div>
    </div>
    

  
    
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("üõí Kh·ªüi t·∫°o h·ªá th·ªëng t·ª´ trang ch·ªß...");

        // ==================== H·ªÜ TH·ªêNG L∆ØU GI·ªé H√ÄNG THEO T√ÄI KHO·∫¢N ====================

        // L∆∞u gi·ªè h√†ng c·ªßa user tr∆∞·ªõc khi ƒëƒÉng xu·∫•t
        function saveUserCartBeforeLogout() {
          const userData = JSON.parse(localStorage.getItem("currentUser"));
          if (!userData || !userData.isLoggedIn) return;

          const userId = userData.phone || userData.email;
          const cartData = JSON.parse(localStorage.getItem("cartData")) || {
            items: [],
          };

          if (cartData.items.length > 0) {
            // L∆∞u gi·ªè h√†ng v·ªõi key l√† user ID
            localStorage.setItem(`cart_${userId}`, JSON.stringify(cartData));
            console.log(`üíæ ƒê√£ l∆∞u gi·ªè h√†ng cho user: ${userId}`, cartData);
          }
        }

        // Kh√¥i ph·ª•c gi·ªè h√†ng khi ƒëƒÉng nh·∫≠p
        function restoreUserCartOnLogin(userData) {
          if (!userData) return;

          const userId = userData.phone || userData.email;
          const savedCart = JSON.parse(localStorage.getItem(`cart_${userId}`));

          if (savedCart && savedCart.items.length > 0) {
            // Kh√¥i ph·ª•c gi·ªè h√†ng ƒë√£ l∆∞u
            localStorage.setItem("cartData", JSON.stringify(savedCart));
            console.log(
              `üîÑ ƒê√£ kh√¥i ph·ª•c gi·ªè h√†ng cho user: ${userId}`,
              savedCart
            );
            showNotification(
              `ƒê√£ kh√¥i ph·ª•c ${savedCart.items.length} s·∫£n ph·∫©m trong gi·ªè h√†ng!`
            );
          } else {
            // N·∫øu kh√¥ng c√≥ gi·ªè h√†ng l∆∞u, t·∫°o gi·ªè h√†ng tr·ªëng
            const emptyCart = {
              items: [],
              subtotal: 0,
              discount: 0,
              total: 0,
              lastUpdated: new Date().toISOString(),
            };
            localStorage.setItem("cartData", JSON.stringify(emptyCart));
            console.log(`üÜï ƒê√£ t·∫°o gi·ªè h√†ng tr·ªëng cho user: ${userId}`);
          }
        }

        // ==================== H·ªÜ TH·ªêNG ƒêƒÇNG NH·∫¨P ====================

        // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        function checkLoginStatus() {
          const userData = JSON.parse(localStorage.getItem("currentUser"));
          return userData && userData.isLoggedIn;
        }

        // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang ƒëƒÉng nh·∫≠p
        function redirectToLogin() {
          window.location.href = "page/user.html";
        }

        // H√†m ki·ªÉm tra ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi th·ª±c hi·ªán h√†nh ƒë·ªông
        function requireLogin(actionCallback, productData = null) {
          if (!checkLoginStatus()) {
            showLoginRequiredNotification();
            return false;
          }

          // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, th·ª±c hi·ªán h√†nh ƒë·ªông
          if (actionCallback && productData) {
            return actionCallback(productData);
          } else if (actionCallback) {
            return actionCallback();
          }
          return true;
        }

        // C·∫≠p nh·∫≠t giao di·ªán theo tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        function updateLoginUI() {
          const userData = JSON.parse(localStorage.getItem("currentUser"));
          const cartIcon = document.getElementById("cart-icon");
          const wishlistIcon = document.getElementById("wishlist-icon");
          const userInfo = document.getElementById("userInfo");
          const userName = document.getElementById("userName");
          const loginIconWrapper =
            document.getElementById("login-icon-wrapper");
          const compareButtons = document.querySelectorAll(".compare-btn");
          const modalCartButtons = document.querySelectorAll(".btn-cart");
          const modalBuyButtons = document.querySelectorAll(".btn-buy");

          if (userData && userData.isLoggedIn) {
            // Ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p - ·∫®N n√∫t ƒëƒÉng nh·∫≠p v√† HI·ªÜN th√¥ng tin user
            loginIconWrapper.style.display = "none";
            userInfo.style.display = "flex";
            userName.textContent = userData.fullname || userData.phone;

            // Cho ph√©p t·∫•t c·∫£ ch·ª©c nƒÉng kh√°c
            cartIcon.style.cursor = "pointer";
            cartIcon.style.opacity = "1";
            wishlistIcon.style.cursor = "pointer";
            wishlistIcon.style.opacity = "1";

            // K√≠ch ho·∫°t t·∫•t c·∫£ n√∫t th√™m v√†o gi·ªè h√†ng
            compareButtons.forEach((btn) => {
              btn.style.cursor = "pointer";
              btn.style.opacity = "1";
              btn.title = "Th√™m v√†o gi·ªè h√†ng";
              btn.disabled = false;
            });

            modalCartButtons.forEach((btn) => {
              btn.style.cursor = "pointer";
              btn.style.opacity = "1";
              btn.title = "Th√™m v√†o gi·ªè h√†ng";
              btn.disabled = false;
            });

            modalBuyButtons.forEach((btn) => {
              btn.style.cursor = "pointer";
              btn.style.opacity = "1";
              btn.title = "Mua ngay";
              btn.disabled = false;
            });

            // C·∫¨P NH·∫¨T: Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng gi·ªè h√†ng th·ª±c t·∫ø khi ƒë√£ ƒëƒÉng nh·∫≠p
            updateCartCount();

            console.log(
              `üë§ Ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p: ${
                userData.fullname || userData.phone
              }`
            );
          } else {
            // Ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p - HI·ªÜN n√∫t ƒëƒÉng nh·∫≠p v√† ·∫®N th√¥ng tin user
            loginIconWrapper.style.display = "flex";
            userInfo.style.display = "none";

            // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ ch·ª©c nƒÉng gi·ªè h√†ng
            cartIcon.style.cursor = "not-allowed";
            cartIcon.style.opacity = "0.6";
            wishlistIcon.style.cursor = "not-allowed";
            wishlistIcon.style.opacity = "0.6";

            // V√¥ hi·ªáu h√≥a t·∫•t c·∫£ n√∫t th√™m v√†o gi·ªè h√†ng
            compareButtons.forEach((btn) => {
              btn.style.cursor = "not-allowed";
              btn.style.opacity = "0.6";
              btn.title = "Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè h√†ng";
              btn.disabled = true;
            });

            modalCartButtons.forEach((btn) => {
              btn.style.cursor = "not-allowed";
              btn.style.opacity = "0.6";
              btn.title = "Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o gi·ªè h√†ng";
              btn.disabled = true;
            });

            modalBuyButtons.forEach((btn) => {
              btn.style.cursor = "not-allowed";
              btn.style.opacity = "0.6";
              btn.title = "Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ mua h√†ng";
              btn.disabled = true;
            });

            // C·∫¨P NH·∫¨T: ƒê·∫∑t gi·ªè h√†ng v·ªÅ 0 khi ch∆∞a ƒëƒÉng nh·∫≠p
            const cartCountElement = document.getElementById("cart-count");
            if (cartCountElement) {
              cartCountElement.textContent = "0";
              cartCountElement.style.display = "none";
            }
          }
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu ƒëƒÉng nh·∫≠p
        function showLoginRequiredNotification() {
          const existingNotification = document.querySelector(
            ".login-required-notification"
          );
          if (existingNotification) {
            existingNotification.remove();
          }

          const notification = document.createElement("div");
          notification.className = "login-required-notification";
          notification.style.cssText = `
                position: fixed;
                top: 120px;
                right: 20px;
                background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                color: white;
                padding: 20px 25px;
                border-radius: 12px;
                z-index: 10000;
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
                animation: slideIn 0.5s ease;
                max-width: 350px;
                font-weight: 500;
                border-left: 5px solid #c23616;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                cursor: pointer;
            `;

          notification.innerHTML = `
                <div style="display: flex; align-items: flex-start; gap: 15px;">
                    <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 50%;">
                        <i class="fas fa-exclamation-circle" style="font-size: 24px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold; font-size: 16px; margin-bottom: 8px;">üîí Y√™u c·∫ßu ƒëƒÉng nh·∫≠p</div>
                        <div style="font-size: 13px; opacity: 0.95; line-height: 1.4;">
                            Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p gi·ªè h√†ng v√† danh s√°ch y√™u th√≠ch.
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

          // Click v√†o th√¥ng b√°o ƒë·ªÉ chuy·ªÉn ƒë·∫øn trang ƒëƒÉng nh·∫≠p
          notification.addEventListener("click", function () {
            redirectToLogin();
          });

          document.body.appendChild(notification);

          // T·ª± ƒë·ªông ·∫©n sau 5 gi√¢y
          setTimeout(() => {
            if (notification.parentNode) {
              notification.style.animation = "slideOut 0.5s ease";
              setTimeout(() => {
                if (notification.parentNode) {
                  notification.parentNode.removeChild(notification);
                }
              }, 500);
            }
          }, 5000);
        }

        // X·ª≠ l√Ω ƒëƒÉng xu·∫•t
        document
          .getElementById("logoutBtn")
          .addEventListener("click", function () {
            // L∆∞u gi·ªè h√†ng tr∆∞·ªõc khi ƒëƒÉng xu·∫•t
            saveUserCartBeforeLogout();

            // X√≥a th√¥ng tin user
            localStorage.removeItem("currentUser");

            // T·∫°o gi·ªè h√†ng tr·ªëng
            const emptyCart = {
              items: [],
              subtotal: 0,
              discount: 0,
              total: 0,
              lastUpdated: new Date().toISOString(),
            };
            localStorage.setItem("cartData", JSON.stringify(emptyCart));

            // Hi·ªÉn th·ªã th√¥ng b√°o
            showLogoutNotification();

            // C·∫≠p nh·∫≠t UI
            updateLoginUI();
          });

        function showLogoutNotification() {
          const notification = document.createElement("div");
          notification.style.cssText = `
                position: fixed;
                top: 120px;
                right: 20px;
                background: linear-gradient(135deg, #6c757d, #495057);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease;
            `;
          notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng</span>
                </div>
            `;

          document.body.appendChild(notification);

          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease";
            setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
            }, 300);
          }, 3000);
        }

        // X·ª≠ l√Ω click gi·ªè h√†ng
        document
          .getElementById("cart-icon")
          .addEventListener("click", function (e) {
            if (!checkLoginStatus()) {
              e.preventDefault();
              e.stopPropagation();

              // Hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu ƒëƒÉng nh·∫≠p
              showLoginRequiredNotification();
              return false;
            }

            // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang gi·ªè h√†ng
            window.location.href = "page/cart.html";
          });

        // X·ª≠ l√Ω click wishlist
        document
          .getElementById("wishlist-icon")
          .addEventListener("click", function (e) {
            if (!checkLoginStatus()) {
              e.preventDefault();
              e.stopPropagation();
              showLoginRequiredNotification();
              return false;
            }

            // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, x·ª≠ l√Ω wishlist
            console.log("üõçÔ∏è Truy c·∫≠p wishlist");
          });

        // X·ª≠ l√Ω click n√∫t ƒëƒÉng nh·∫≠p
        document
          .getElementById("login-icon-wrapper")
          .addEventListener("click", function () {
            window.location.href = "page/user.html";
          });

        // ==================== H·ªÜ TH·ªêNG GI·ªé H√ÄNG ====================

        // Ki·ªÉm tra quay v·ªÅ t·ª´ thanh to√°n
        function checkReturnFromCheckout() {
          const lastOrder = JSON.parse(localStorage.getItem("lastOrder"));

          if (lastOrder && lastOrder.orderCompleted) {
            console.log(
              "üîÑ Ph√°t hi·ªán quay v·ªÅ t·ª´ trang thanh to√°n th√†nh c√¥ng",
              lastOrder
            );

            // üî• ƒê·∫¢M B·∫¢O gi·ªè h√†ng ƒë√£ ƒë∆∞·ª£c reset
            const currentCart = JSON.parse(localStorage.getItem("cartData"));
            if (
              currentCart &&
              currentCart.items &&
              currentCart.items.length > 0
            ) {
              console.log(
                "‚ö†Ô∏è Ph√°t hi·ªán gi·ªè h√†ng ch∆∞a ƒë∆∞·ª£c reset, ƒëang reset..."
              );
              const emptyCart = {
                items: [],
                subtotal: 0,
                discount: 0,
                total: 0,
                lastUpdated: new Date().toISOString(),
              };
              localStorage.setItem("cartData", JSON.stringify(emptyCart));
              updateCartCount();
            }

            // Hi·ªÉn th·ªã th√¥ng b√°o ƒë·∫∑t h√†ng th√†nh c√¥ng
            showOrderSuccessNotification(lastOrder);

            // X√≥a th√¥ng tin ƒë∆°n h√†ng t·∫°m th·ªùi
            localStorage.removeItem("lastOrder");

            console.log("üóëÔ∏è ƒê√£ x√≥a th√¥ng tin ƒë∆°n h√†ng t·∫°m th·ªùi");
          }
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o ƒë·∫∑t h√†ng th√†nh c√¥ng
        function showOrderSuccessNotification(orderData) {
          // X√≥a th√¥ng b√°o c≈© n·∫øu c√≥
          const existingNotification = document.querySelector(
            ".order-success-notification"
          );
          if (existingNotification) {
            existingNotification.remove();
          }

          const notification = document.createElement("div");
          notification.className = "order-success-notification";
          notification.style.cssText = `
            position: fixed;
            top: 120px;
            right: 20px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px 25px;
            border-radius: 12px;
            z-index: 10000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            animation: slideIn 0.5s ease;
            max-width: 380px;
            font-weight: 500;
            border-left: 5px solid #1e7e34;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          `;

          const orderTime = new Date(orderData.completedAt).toLocaleTimeString(
            "vi-VN"
          );

          notification.innerHTML = `
            <div style="display: flex; align-items: flex-start; gap: 15px;">
              <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 50%;">
                <i class="fas fa-check-circle" style="font-size: 24px;"></i>
              </div>
              <div style="flex: 1;">
                <div style="font-weight: bold; font-size: 16px; margin-bottom: 8px;">üéâ ƒê·∫∑t h√†ng th√†nh c√¥ng!</div>
                <div style="font-size: 13px; opacity: 0.95; line-height: 1.4;">
                  <div><strong>M√£ ƒë∆°n h√†ng:</strong> ${orderData.orderId}</div>
                  <div><strong>Th·ªùi gian:</strong> ${orderTime}</div>
                  <div><strong>T·ªïng ti·ªÅn:</strong> ${formatPrice(
                    calculateOrderTotal(orderData.cartItems)
                  )}</div>
                  <div style="margin-top: 8px; font-style: italic;">C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng t·∫°i WatchStore!</div>
                </div>
              </div>
              <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
                <i class="fas fa-times"></i>
              </button>
            </div>
          `;

          document.body.appendChild(notification);

          setTimeout(() => {
            if (notification.parentNode) {
              notification.style.animation = "slideOut 0.5s ease";
              setTimeout(() => {
                if (notification.parentNode) {
                  notification.parentNode.removeChild(notification);
                }
              }, 500);
            }
          }, 8000);
        }

        // T√≠nh t·ªïng ti·ªÅn ƒë∆°n h√†ng
        function calculateOrderTotal(cartItems) {
          const subtotal = cartItems.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          return subtotal * 0.8; // √Åp d·ª•ng gi·∫£m gi√° 20%
        }

        // ƒê·ªãnh d·∫°ng ti·ªÅn
        function formatPrice(price) {
          return new Intl.NumberFormat("vi-VN", {
            style: "currency",
            currency: "VND",
          }).format(price);
        }

        // Kh·ªüi t·∫°o gi·ªè h√†ng
        function initializeCart() {
          const userData = JSON.parse(localStorage.getItem("currentUser"));

          if (userData && userData.isLoggedIn) {
            // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, kh√¥i ph·ª•c gi·ªè h√†ng
            restoreUserCartOnLogin(userData);
          } else {
            // N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p, t·∫°o gi·ªè h√†ng tr·ªëng
            if (!localStorage.getItem("cartData")) {
              const initialCartData = {
                items: [],
                subtotal: 0,
                discount: 0,
                total: 0,
                lastUpdated: new Date().toISOString(),
              };
              localStorage.setItem("cartData", JSON.stringify(initialCartData));
              console.log("üì¶ ƒê√£ kh·ªüi t·∫°o gi·ªè h√†ng tr·ªëng");
            }
          }
        }

        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng
        function updateCartCount() {
          try {
            const cartData = JSON.parse(localStorage.getItem("cartData")) || {
              items: [],
            };
            const totalItems = cartData.items.reduce(
              (sum, item) => sum + item.quantity,
              0
            );

            const cartCountElement = document.getElementById("cart-count");
            if (cartCountElement) {
              cartCountElement.textContent = totalItems;
              cartCountElement.style.display = totalItems > 0 ? "flex" : "none";
            }

            console.log(`üõçÔ∏è S·ªë l∆∞·ª£ng gi·ªè h√†ng: ${totalItems}`);
            return totalItems;
          } catch (error) {
            console.error("‚ùå L·ªói khi c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng:", error);
            return 0;
          }
        }

        // T√≠nh to√°n t·ªïng ti·ªÅn
        function updateCartTotals(cartData) {
          cartData.subtotal = cartData.items.reduce((sum, item) => {
            return sum + item.price * item.quantity;
          }, 0);

          cartData.discount = Math.round(cartData.subtotal * 0.2);
          cartData.total = cartData.subtotal - cartData.discount;
          cartData.lastUpdated = new Date().toISOString();

          console.log(`üí∞ T·ªïng ti·ªÅn: ${cartData.total.toLocaleString()}ƒë`);
          return cartData;
        }

        // T·∫°o key s·∫£n ph·∫©m duy nh·∫•t
        function generateProductKey(productName, price) {
          const nameKey = productName
            .replace(/[^a-zA-Z0-9]/g, "")
            .substring(0, 20)
            .toUpperCase();
          const priceKey = price.toString();
          return `${nameKey}-${priceKey}`;
        }

        // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng
        function addToCart(productData) {
          try {
            // Ki·ªÉm tra ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi th√™m
            if (!checkLoginStatus()) {
              showLoginRequiredNotification();
              return false;
            }

            // ‚úÖ KI·ªÇM TRA STOCK T·ª™ LOCALSTORAGE-INVENTORY
            const inventory = JSON.parse(localStorage.getItem("inventory")) || [];
            const productInventory = inventory.find(i => i.productId === productData.id);
            const stock = productInventory ? productInventory.stock : null;
            
            // N·∫øu t·ªìn kho = 0, hi·ªÉn th·ªã th√¥ng b√°o v√† kh√¥ng th√™m v√†o gi·ªè
            if (stock === 0) {
              alert("‚ùå S·∫£n ph·∫©m h·∫øt h√†ng");
              return false;
            }

            let cartData = JSON.parse(localStorage.getItem("cartData")) || {
              items: [],
            };

            const productKey = generateProductKey(
              productData.name,
              productData.price
            );

            const existingItemIndex = cartData.items.findIndex(
              (item) => item.key === productKey
            );

            if (existingItemIndex !== -1) {
              cartData.items[existingItemIndex].quantity += 1;
              console.log(`‚ûï ƒê√£ tƒÉng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m: ${productData.name}`);
            } else {
              const newItem = {
                id: `SP-${Date.now().toString().slice(-6)}`,
                key: productKey,
                name: productData.name,
                sku: productData.sku || `SP-${Date.now().toString().slice(-6)}`,
                price: productData.price,
                quantity: 1,
                image: productData.image,
                addedAt: new Date().toISOString(),
              };

              cartData.items.push(newItem);
              console.log(`üÜï ƒê√£ th√™m s·∫£n ph·∫©m m·ªõi: ${productData.name}`);
            }

            cartData = updateCartTotals(cartData);
            localStorage.setItem("cartData", JSON.stringify(cartData));
            updateCartCount();
            showNotification(`ƒê√£ th√™m "${productData.name}" v√†o gi·ªè h√†ng!`);

            console.log("üìã Gi·ªè h√†ng hi·ªán t·∫°i:", cartData);
            return true;
          } catch (error) {
            console.error("‚ùå L·ªói khi th√™m v√†o gi·ªè h√†ng:", error);
            showNotification(
              "‚ùå C√≥ l·ªói x·∫£y ra khi th√™m v√†o gi·ªè h√†ng!",
              "error"
            );
            return false;
          }
        }

        // Phi√™n b·∫£n th√™m v√†o gi·ªè h√†ng c√≥ ki·ªÉm tra ƒëƒÉng nh·∫≠p
        function addToCartWithAuth(productData) {
          return requireLogin(addToCart, productData);
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message, type = "success") {
          const existingNotification =
            document.querySelector(".cart-notification");
          if (existingNotification) {
            existingNotification.remove();
          }

          const notification = document.createElement("div");
          notification.className = `cart-notification ${type}`;
          notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            background: ${type === "success" ? "#28a745" : "#dc3545"};
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideIn 0.3s ease;
            max-width: 300px;
            font-weight: 500;
          `;
          notification.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
              <i class="fas ${
                type === "success" ? "fa-check-circle" : "fa-exclamation-circle"
              }"></i>
              <span>${message}</span>
            </div>
          `;

          document.body.appendChild(notification);

          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease";
            setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
            }, 300);
          }, 3000);
        }

        // Ki·ªÉm tra v√† s·ª≠a ch·ªØa d·ªØ li·ªáu gi·ªè h√†ng
        function validateAndFixCartData() {
          try {
            const cartData = JSON.parse(localStorage.getItem("cartData"));
            if (!cartData || !Array.isArray(cartData.items)) {
              console.log(
                "üõ†Ô∏è D·ªØ li·ªáu gi·ªè h√†ng kh√¥ng h·ª£p l·ªá, ƒëang kh·ªüi t·∫°o l·∫°i..."
              );
              initializeCart();
              return;
            }

            const groupedItems = {};
            cartData.items.forEach((item) => {
              if (!item.key) {
                item.key = generateProductKey(item.name, item.price);
              }

              if (groupedItems[item.key]) {
                groupedItems[item.key].quantity += item.quantity;
              } else {
                groupedItems[item.key] = { ...item };
              }
            });

            cartData.items = Object.values(groupedItems);
            updateCartTotals(cartData);
            localStorage.setItem("cartData", JSON.stringify(cartData));

            console.log("üõ†Ô∏è ƒê√£ nh√≥m c√°c s·∫£n ph·∫©m gi·ªëng nhau trong gi·ªè h√†ng");
          } catch (error) {
            console.error("‚ùå L·ªói khi ki·ªÉm tra gi·ªè h√†ng:", error);
            initializeCart();
          }
        }

        // Th√™m ki·ªÉm tra ƒëƒÉng nh·∫≠p khi truy c·∫≠p tr·ª±c ti·∫øp trang gi·ªè h√†ng
        function checkCartAccess() {
          if (
            window.location.pathname.includes("cart.html") &&
            !checkLoginStatus()
          ) {
            showLoginRequiredNotification();
            setTimeout(() => {
              window.location.href = "index.html";
            }, 2000);
            return false;
          }
          return true;
        }

        // ==================== X·ª¨ L√ù S·ª∞ KI·ªÜN CLICK ====================

        // X·ª≠ l√Ω s·ª± ki·ªán click th√™m v√†o gi·ªè h√†ng t·ª´ modal
        document.addEventListener("click", function (e) {
          if (e.target.classList.contains("btn-cart")) {
            const modal = document.getElementById("productDetailModal");
            if (modal && modal.style.display === "block") {
              const productName =
                document.getElementById("modalProductName").textContent;
              const productPriceText =
                document.getElementById("modalCurrentPrice").textContent;
              const productImage =
                document.getElementById("modalProductImage").src;

              const productPrice = parseInt(
                productPriceText.replace(/\D/g, "")
              );

              if (!productName || !productPrice) {
                console.error("‚ùå Kh√¥ng th·ªÉ l·∫•y th√¥ng tin s·∫£n ph·∫©m t·ª´ modal");
                return;
              }

              // ‚úÖ T√åM PRODUCT ID T·ª™ DANH S√ÅCH PRODUCTS
              const currentProduct = window.PRODUCTS ? window.PRODUCTS.find(p => p.name === productName) : null;
              const productId = currentProduct ? currentProduct.id : null;

              const productData = {
                id: productId,
                name: productName,
                price: productPrice,
                image: productImage,
              };

              // S·ª≠ d·ª•ng h√†m c√≥ ki·ªÉm tra ƒëƒÉng nh·∫≠p
              addToCartWithAuth(productData);
            }
          }
        });

        // X·ª≠ l√Ω s·ª± ki·ªán click n√∫t "MUA NGAY" trong modal
        document.addEventListener("click", function (e) {
          if (e.target.classList.contains("btn-buy")) {
            const modal = document.getElementById("productDetailModal");
            if (modal && modal.style.display === "block") {
              const productName =
                document.getElementById("modalProductName").textContent;
              const productPriceText =
                document.getElementById("modalCurrentPrice").textContent;
              const productImage =
                document.getElementById("modalProductImage").src;

              const productPrice = parseInt(
                productPriceText.replace(/\D/g, "")
              );

              if (!productName || !productPrice) {
                console.error("‚ùå Kh√¥ng th·ªÉ l·∫•y th√¥ng tin s·∫£n ph·∫©m t·ª´ modal");
                return;
              }

              // ‚úÖ T√åM PRODUCT ID T·ª™ DANH S√ÅCH PRODUCTS
              const currentProduct = window.PRODUCTS ? window.PRODUCTS.find(p => p.name === productName) : null;
              const productId = currentProduct ? currentProduct.id : null;

              const productData = {
                id: productId,
                name: productName,
                price: productPrice,
                image: productImage,
              };

              // Th√™m v√†o gi·ªè h√†ng v√† chuy·ªÉn ƒë·∫øn trang thanh to√°n
              if (addToCartWithAuth(productData)) {
                // N·∫øu th√™m th√†nh c√¥ng, chuy·ªÉn ƒë·∫øn trang gi·ªè h√†ng
                setTimeout(() => {
                  window.location.href = "page/cart.html";
                }, 1000);
              }
            }
          }
        });

        // ==================== KH·ªûI CH·∫†Y H·ªÜ TH·ªêNG ====================

        // Kh·ªüi t·∫°o gi·ªè h√†ng
        initializeCart();
        validateAndFixCartData();
        updateCartCount();
        checkReturnFromCheckout();

        // Kh·ªüi t·∫°o h·ªá th·ªëng ƒëƒÉng nh·∫≠p
        updateLoginUI();

        // Ki·ªÉm tra quy·ªÅn truy c·∫≠p gi·ªè h√†ng n·∫øu ƒëang ·ªü trang cart
        checkCartAccess();

        // ‚úÖ TH√äM: Listener cho s·ª± ki·ªán t√†i kho·∫£n b·ªã kh√≥a
        window.addEventListener("userAccountLocked", function() {
          const currentUser = JSON.parse(localStorage.getItem("currentUser"));
          if (currentUser && currentUser.isLoggedIn) {
            alert("‚ùå T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ b·ªã kh√≥a!");
            // Kh√¥ng x√≥a to√†n b·ªô localStorage khi b·ªã kho√° ‚Äî ch·ªâ logout
            currentUser.isLoggedIn = false;
            currentUser.locked = true;
            localStorage.setItem("currentUser", JSON.stringify(currentUser));
            // C·∫≠p nh·∫≠t giao di·ªán / reload ƒë·ªÉ reflect tr·∫°ng th√°i
            location.reload();
          }
        });

        // ‚úÖ TH√äM: Listener cho s·ª± ki·ªán t√†i kho·∫£n b·ªã x√≥a
        window.addEventListener("userAccountDeleted", function() {
          const currentUser = JSON.parse(localStorage.getItem("currentUser"));
          if (currentUser && currentUser.isLoggedIn) {
            alert("‚ùå T√†i kho·∫£n c·ªßa b·∫°n kh√¥ng t·ªìn t·∫°i!");
            // X√≥a ho√†n to√†n khi t√†i kho·∫£n b·ªã x√≥a
            localStorage.removeItem("currentUser");
            localStorage.removeItem("cartData");
            location.reload();
          }
        });

        // ‚úÖ TH√äM: H√†m ki·ªÉm tra ƒë·ªãnh k·ª≥ xem t√†i kho·∫£n c√≥ b·ªã x√≥a/kh√≥a
        function checkAccountStatus() {
          const currentUser = JSON.parse(localStorage.getItem("currentUser"));
          if (!currentUser || !currentUser.isLoggedIn) return;

          const allUsers = JSON.parse(localStorage.getItem("users")) || [];
          const exactUser = allUsers.find(u => u.phone === currentUser.phone);

          if (!exactUser) {
            // T√†i kho·∫£n ƒë√£ b·ªã x√≥a
            alert("‚ùå T√†i kho·∫£n c·ªßa b·∫°n kh√¥ng t·ªìn t·∫°i!");
            localStorage.removeItem("currentUser");
            localStorage.removeItem("cartData");
            location.reload();
          } else if (exactUser.locked) {
            // T√†i kho·∫£n b·ªã kho√°: logout nh∆∞ng gi·ªØ data
            alert("‚ùå T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ b·ªã kh√≥a!");
            currentUser.isLoggedIn = false;
            currentUser.locked = true;
            localStorage.setItem("currentUser", JSON.stringify(currentUser));
            location.reload();
          }
        }

        // Ki·ªÉm tra ƒë·ªãnh k·ª≥ tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        setInterval(() => {
          updateLoginUI();
          checkAccountStatus();
        }, 2000);

        const currentCart = JSON.parse(localStorage.getItem("cartData"));
        console.log("üõí Gi·ªè h√†ng hi·ªán t·∫°i:", currentCart);
        console.log("‚úÖ H·ªá th·ªëng gi·ªè h√†ng ƒë√£ s·∫µn s√†ng!");
        console.log("üîê H·ªá th·ªëng ki·ªÉm tra ƒëƒÉng nh·∫≠p ƒë√£ s·∫µn s√†ng!");
      });
      // ==================== H√ÄM X·ª¨ L√ù MODAL TH√îNG TIN T√ÄI KHO·∫¢N ====================

      function openAccountInfoModal() {
        // ƒê√≥ng b·∫£ng th√¥ng tin t√†i kho·∫£n tr∆∞·ªõc
        document.getElementById("accountInfoPanel").classList.remove("show");

        // C·∫≠p nh·∫≠t th√¥ng tin modal
        updateAccountInfoModal();

        // Hi·ªÉn th·ªã modal
        document.getElementById("accountInfoModal").style.display = "flex";
      }

      function closeAccountInfoModal() {
        document.getElementById("accountInfoModal").style.display = "none";
      }

      function updateAccountInfoModal() {
        const userData = JSON.parse(localStorage.getItem("currentUser"));
        const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};

        if (userData) {
          // C·∫≠p nh·∫≠t th√¥ng tin t·ª´ currentUser
          document.getElementById("modalAccountName").textContent =
            userData.fullname || "T√™n t√†i kho·∫£n";
          document.getElementById("modalAccountEmail").textContent =
            userData.email || "email@example.com";
          document.getElementById("modalInfoFullname").textContent =
            userData.fullname || "Ch∆∞a c·∫≠p nh·∫≠t";
          document.getElementById("modalInfoPhone").textContent =
            userData.phone || "Ch∆∞a c·∫≠p nh·∫≠t";
          document.getElementById("modalInfoEmail").textContent =
            userData.email || "Ch∆∞a c·∫≠p nh·∫≠t";

          // C·∫≠p nh·∫≠t avatar v·ªõi ch·ªØ c√°i ƒë·∫ßu
          const firstLetter = (userData.fullname || "U")
            .charAt(0)
            .toUpperCase();
          document.getElementById("modalAccountAvatar").textContent =
            firstLetter;
        }

        // C·∫≠p nh·∫≠t th√¥ng tin t·ª´ userInfo (d·ªØ li·ªáu ƒëƒÉng k√Ω)
        if (userInfo.birthdate) {
          document.getElementById("modalInfoBirthdate").textContent =
            formatDate(userInfo.birthdate);
        } else {
          document.getElementById("modalInfoBirthdate").textContent =
            "Ch∆∞a c·∫≠p nh·∫≠t";
        }

        // T·∫°o m√£ th√†nh vi√™n t·ª´ s·ªë ƒëi·ªán tho·∫°i
        if (userData && userData.phone) {
          const memberId = "WSM" + userData.phone.slice(-6);
          document.getElementById("modalInfoMemberId").textContent = memberId;
        } else {
          document.getElementById("modalInfoMemberId").textContent =
            "WSM001234";
        }

        document.getElementById("modalInfoJoinDate").textContent =
          userInfo.joinDate
            ? formatDate(userInfo.joinDate)
            : formatDate(new Date().toISOString());
        document.getElementById("modalInfoMemberLevel").textContent =
          userInfo.memberLevel || "V√†ng";
        document.getElementById("modalInfoPoints").textContent =
          (userInfo.points || 1250) + " ƒëi·ªÉm";
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("vi-VN");
      }

      // ==================== H√ÄM X·ª¨ L√ù MODAL ƒê·ªîI M·∫¨T KH·∫®U ====================

      function openChangePasswordModal() {
        // ƒê√≥ng modal th√¥ng tin t√†i kho·∫£n
        closeAccountInfoModal();

        // Reset form
        document.getElementById("changePasswordForm").reset();
        document.getElementById("passwordSuccessMessage").style.display =
          "none";
        resetPasswordErrors();
        document.getElementById("strengthFill").style.width = "0%";

        // Hi·ªÉn th·ªã modal
        document.getElementById("changePasswordModal").style.display = "flex";
      }

      function closeChangePasswordModal() {
        document.getElementById("changePasswordModal").style.display = "none";
      }

      function resetPasswordErrors() {
        document.querySelectorAll(".error-message").forEach((error) => {
          error.style.display = "none";
        });
        document.querySelectorAll(".form-input").forEach((input) => {
          input.classList.remove("error");
        });
      }

      function showPasswordError(errorId, message) {
        const errorElement = document.getElementById(errorId);
        errorElement.textContent = message;
        errorElement.style.display = "block";

        const inputId = errorId.replace("Error", "");
        const inputElement = document.getElementById(inputId);
        if (inputElement) {
          inputElement.classList.add("error");
        }
      }

      // ==================== H√ÄM X·ª¨ L√ù MODAL CH·ªàNH S·ª¨A TH√îNG TIN ====================

      function openEditInfoModal() {
        // ƒê√≥ng modal th√¥ng tin t√†i kho·∫£n
        closeAccountInfoModal();

        // ƒêi·ªÅn d·ªØ li·ªáu hi·ªán t·∫°i v√†o form
        populateEditForm();

        // Reset l·ªói
        resetEditFormErrors();

        // ·∫®n th√¥ng b√°o th√†nh c√¥ng
        document.getElementById("editSuccessMessage").style.display = "none";

        // Hi·ªÉn th·ªã modal
        document.getElementById("editInfoModal").style.display = "flex";
      }

      function closeEditInfoModal() {
        document.getElementById("editInfoModal").style.display = "none";
      }

      function populateEditForm() {
        const userData = JSON.parse(localStorage.getItem("currentUser"));
        const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};

        if (userData) {
          document.getElementById("editFullname").value =
            userData.fullname || "";
          document.getElementById("editPhone").value = userData.phone || "";
          document.getElementById("editEmail").value = userData.email || "";
        }

        if (userInfo.birthdate) {
          // Format date ƒë·ªÉ hi·ªÉn th·ªã trong input type="date"
          const birthdate = new Date(userInfo.birthdate);
          const formattedDate = birthdate.toISOString().split("T")[0];
          document.getElementById("editBirthdate").value = formattedDate;
        }
      }

      function resetEditFormErrors() {
        document
          .querySelectorAll("#editInfoForm .error-message")
          .forEach((error) => {
            error.style.display = "none";
          });
        document
          .querySelectorAll("#editInfoForm .form-input")
          .forEach((input) => {
            input.classList.remove("error");
          });
      }

      function showEditFormError(errorId, message) {
        const errorElement = document.getElementById(errorId);
        errorElement.textContent = message;
        errorElement.style.display = "block";

        const inputId = errorId.replace("Error", "");
        const inputElement = document.getElementById(inputId);
        if (inputElement) {
          inputElement.classList.add("error");
        }
      }

      // ==================== X·ª¨ L√ù FORM CH·ªàNH S·ª¨A ====================

      function validateEditForm() {
        let isValid = true;
        resetEditFormErrors();

        // Validate h·ªç v√† t√™n
        const fullname = document.getElementById("editFullname").value.trim();
        if (!fullname) {
          showEditFormError("editFullnameError", "Vui l√≤ng nh·∫≠p h·ªç v√† t√™n");
          isValid = false;
        } else if (fullname.length < 2) {
          showEditFormError(
            "editFullnameError",
            "H·ªç v√† t√™n ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±"
          );
          isValid = false;
        }

        // Validate s·ªë ƒëi·ªán tho·∫°i
        const phone = document.getElementById("editPhone").value.trim();
        const phoneRegex = /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;
        if (!phone) {
          showEditFormError("editPhoneError", "Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i");
          isValid = false;
        } else if (!phoneRegex.test(phone)) {
          showEditFormError("editPhoneError", "S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá");
          isValid = false;
        }

        // Validate email
        const email = document.getElementById("editEmail").value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email) {
          showEditFormError("editEmailError", "Vui l√≤ng nh·∫≠p email");
          isValid = false;
        } else if (!emailRegex.test(email)) {
          showEditFormError("editEmailError", "Email kh√¥ng h·ª£p l·ªá");
          isValid = false;
        }

        // Validate ng√†y sinh (kh√¥ng b·∫Øt bu·ªôc)
        const birthdate = document.getElementById("editBirthdate").value;
        if (birthdate) {
          const birthDate = new Date(birthdate);
          const today = new Date();
          const minDate = new Date();
          minDate.setFullYear(today.getFullYear() - 100);

          if (birthDate > today) {
            showEditFormError(
              "editBirthdateError",
              "Ng√†y sinh kh√¥ng th·ªÉ ·ªü t∆∞∆°ng lai"
            );
            isValid = false;
          } else if (birthDate < minDate) {
            showEditFormError("editBirthdateError", "Ng√†y sinh kh√¥ng h·ª£p l·ªá");
            isValid = false;
          }
        }

        return isValid;
      }

      function saveUserInfoUpdates(formData) {
        try {
          // C·∫≠p nh·∫≠t currentUser
          const currentUser =
            JSON.parse(localStorage.getItem("currentUser")) || {};
          currentUser.fullname = formData.fullname;
          currentUser.phone = formData.phone;
          currentUser.email = formData.email;
          localStorage.setItem("currentUser", JSON.stringify(currentUser));

          // C·∫≠p nh·∫≠t userInfo chi ti·∫øt
          const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};
          userInfo.fullname = formData.fullname;
          userInfo.phone = formData.phone;
          userInfo.email = formData.email;
          userInfo.birthdate = formData.birthdate;
          userInfo.lastUpdated = new Date().toISOString();
          localStorage.setItem("userInfo", JSON.stringify(userInfo));

          console.log("‚úÖ ƒê√£ c·∫≠p nh·∫≠t th√¥ng tin user:", userInfo);
          return true;
        } catch (error) {
          console.error("‚ùå L·ªói khi c·∫≠p nh·∫≠t th√¥ng tin user:", error);
          return false;
        }
      }

      function showEditSuccessNotification() {
        const notification = document.createElement("div");
        notification.style.cssText = `
          position: fixed;
          top: 120px;
          right: 20px;
          background: linear-gradient(135deg, #28a745, #20c997);
          color: white;
          padding: 15px 20px;
          border-radius: 8px;
          z-index: 10000;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          animation: slideIn 0.3s ease;
        `;
        notification.innerHTML = `
          <div style="display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-check-circle"></i>
            <span>C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!</span>
          </div>
        `;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.animation = "slideOut 0.3s ease";
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300);
        }, 3000);
      }

      // ==================== X·ª¨ L√ù S·ª∞ KI·ªÜN FORM ====================

      document.addEventListener("DOMContentLoaded", function () {
        // X·ª≠ l√Ω submit form ch·ªânh s·ª≠a
        const editInfoForm = document.getElementById("editInfoForm");
        if (editInfoForm) {
          editInfoForm.addEventListener("submit", function (e) {
            e.preventDefault();

            if (validateEditForm()) {
              const formData = {
                fullname: document.getElementById("editFullname").value.trim(),
                phone: document.getElementById("editPhone").value.trim(),
                email: document.getElementById("editEmail").value.trim(),
                birthdate: document.getElementById("editBirthdate").value,
              };

              if (saveUserInfoUpdates(formData)) {
                // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng trong modal
                document.getElementById("editSuccessMessage").style.display =
                  "flex";

                // C·∫≠p nh·∫≠t UI
                updateLoginUI();
                updateAccountInfoPanel();

                // ƒê√≥ng modal sau 1.5 gi√¢y
                setTimeout(() => {
                  closeEditInfoModal();
                  // M·ªü l·∫°i modal th√¥ng tin ƒë·ªÉ xem thay ƒë·ªïi
                  setTimeout(() => {
                    openAccountInfoModal();
                  }, 500);
                }, 1500);
              }
            }
          });
        }

        // Ki·ªÉm tra ƒë·ªô m·∫°nh m·∫≠t kh·∫©u
        const newPasswordInput = document.getElementById("newPassword");
        const strengthFill = document.getElementById("strengthFill");

        if (newPasswordInput && strengthFill) {
          newPasswordInput.addEventListener("input", function () {
            const password = this.value;
            let strength = 0;

            if (password.length >= 6) strength += 1;
            if (password.match(/[a-z]/)) strength += 1;
            if (password.match(/[A-Z]/)) strength += 1;
            if (password.match(/[0-9]/)) strength += 1;
            if (password.match(/[^a-zA-Z0-9]/)) strength += 1;

            let width = 0;
            let colorClass = "strength-weak";

            if (strength <= 2) {
              width = 33;
              colorClass = "strength-weak";
            } else if (strength <= 4) {
              width = 66;
              colorClass = "strength-medium";
            } else {
              width = 100;
              colorClass = "strength-strong";
            }

            strengthFill.style.width = width + "%";
            strengthFill.className = "strength-fill " + colorClass;
          });
        }

        // X·ª≠ l√Ω submit form ƒë·ªïi m·∫≠t kh·∫©u
        const changePasswordForm =
          document.getElementById("changePasswordForm");
        if (changePasswordForm) {
          changePasswordForm.addEventListener("submit", function (e) {
            e.preventDefault();

            resetPasswordErrors();

            let isValid = true;

            // Ki·ªÉm tra m·∫≠t kh·∫©u hi·ªán t·∫°i
            const currentPassword =
              document.getElementById("currentPassword").value;
            if (!currentPassword) {
              showPasswordError(
                "currentPasswordError",
                "Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
              );
              isValid = false;
            }

            // Ki·ªÉm tra m·∫≠t kh·∫©u m·ªõi
            const newPassword = document.getElementById("newPassword").value;
            if (!newPassword) {
              showPasswordError(
                "newPasswordError",
                "Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
              );
              isValid = false;
            } else if (newPassword.length < 6 || !newPassword.match(/[0-9]/)) {
              showPasswordError(
                "newPasswordError",
                "M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª± v√† 1 ch·ªØ s·ªë"
              );
              isValid = false;
            }

            // Ki·ªÉm tra x√°c nh·∫≠n m·∫≠t kh·∫©u
            const confirmPassword =
              document.getElementById("confirmPassword").value;
            if (!confirmPassword) {
              showPasswordError(
                "confirmPasswordError",
                "Vui l√≤ng x√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi"
              );
              isValid = false;
            } else if (newPassword !== confirmPassword) {
              showPasswordError(
                "confirmPasswordError",
                "M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp"
              );
              isValid = false;
            }

            if (isValid) {
              saveNewPassword(newPassword);
            }
          });
        }

        function saveNewPassword(newPassword) {
          const userData = JSON.parse(localStorage.getItem("currentUser"));

          if (userData) {
            // C·∫≠p nh·∫≠t m·∫≠t kh·∫©u
            userData.password = newPassword;
            localStorage.setItem("currentUser", JSON.stringify(userData));

            // L∆∞u th√¥ng tin user chi ti·∫øt
            const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};
            userInfo.password = newPassword;
            userInfo.lastPasswordChange = new Date().toISOString();
            localStorage.setItem("userInfo", JSON.stringify(userInfo));

            // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
            document.getElementById("passwordSuccessMessage").style.display =
              "flex";
            document.getElementById("changePasswordForm").reset();
            document.getElementById("strengthFill").style.width = "0%";

            // ·∫®n th√¥ng b√°o sau 3 gi√¢y
            setTimeout(() => {
              document.getElementById("passwordSuccessMessage").style.display =
                "none";
              closeChangePasswordModal();
            }, 2000);

            console.log("‚úÖ ƒê√£ c·∫≠p nh·∫≠t m·∫≠t kh·∫©u m·ªõi cho user");
          }
        }

        // ƒê√≥ng modal khi click ra ngo√†i
        window.addEventListener("click", function (e) {
          const accountInfoModal = document.getElementById("accountInfoModal");
          const changePasswordModal = document.getElementById(
            "changePasswordModal"
          );
          const editInfoModal = document.getElementById("editInfoModal");

          if (e.target === accountInfoModal) {
            closeAccountInfoModal();
          }
          if (e.target === changePasswordModal) {
            closeChangePasswordModal();
          }
          if (e.target === editInfoModal) {
            closeEditInfoModal();
          }
        });
      });

      // ==================== C·∫¨P NH·∫¨T B·∫¢NG TH√îNG TIN ====================

      function updateAccountInfoPanel() {
        const userData = JSON.parse(localStorage.getItem("currentUser"));
        const userInfo = JSON.parse(localStorage.getItem("userInfo")) || {};

        if (userData) {
          // C·∫≠p nh·∫≠t b·∫£ng th√¥ng tin t√†i kho·∫£n
          document.getElementById("accountName").textContent =
            userData.fullname || "T√™n t√†i kho·∫£n";
          document.getElementById("accountEmail").textContent =
            userData.email || "email@example.com";

          // C·∫≠p nh·∫≠t avatar v·ªõi ch·ªØ c√°i ƒë·∫ßu
          const firstLetter = (userData.fullname || "U")
            .charAt(0)
            .toUpperCase();
          document.getElementById("accountAvatar").textContent = firstLetter;

          // C·∫≠p nh·∫≠t user info trong header
          const userNameElement = document.getElementById("userName");
          if (userNameElement) {
            userNameElement.textContent = userData.fullname || userData.phone;
          }
        }
      }

      // ==================== C·∫¨P NH·∫¨T S·ª∞ KI·ªÜN CLICK ====================

      // Th√™m s·ª± ki·ªán click cho c√°c n√∫t trong b·∫£ng th√¥ng tin
      document.addEventListener("DOMContentLoaded", function () {
        const accountInfoBtn = document.getElementById("accountInfoBtn");
        const editInfoBtn = document.getElementById("editInfoBtn");
        const changePasswordBtn = document.getElementById("changePasswordBtn");

        if (accountInfoBtn) {
          accountInfoBtn.addEventListener("click", function () {
            openAccountInfoModal();
          });
        }

        if (editInfoBtn) {
          editInfoBtn.addEventListener("click", function () {
            openEditInfoModal();
          });
        }

        if (changePasswordBtn) {
          changePasswordBtn.addEventListener("click", function () {
            openChangePasswordModal();
          });
        }

        // X·ª≠ l√Ω click v√†o icon ng∆∞·ªùi d√πng ƒë·ªÉ hi·ªÉn th·ªã b·∫£ng th√¥ng tin
        const userIconWrapper = document.getElementById("login-icon-wrapper");
        const accountInfoPanel = document.getElementById("accountInfoPanel");

        if (userIconWrapper) {
          userIconWrapper.addEventListener("click", function (e) {
            e.stopPropagation();
            accountInfoPanel.classList.toggle("show");
          });
        }

        // ƒê√≥ng b·∫£ng th√¥ng tin khi click ra ngo√†i
        document.addEventListener("click", function (e) {
  if (!accountInfoPanel || !userIconWrapper) return;

  if (
    !accountInfoPanel.contains(e.target) &&
    !userIconWrapper.contains(e.target)
  ) {
    accountInfoPanel.classList.remove("show");
  }
});
      });

      // ==================== X·ª¨ L√ù D·ªÆ LI·ªÜU ƒêƒÇNG K√ù T·ª™ TRANG USER ====================

      // H√†m ƒë·ªÉ l∆∞u th√¥ng tin chi ti·∫øt t·ª´ ƒëƒÉng k√Ω
      function saveUserRegistrationData(formData) {
        const userInfo = {
          fullname: formData.fullname,
          phone: formData.phone,
          email: formData.email,
          birthdate: formData.birthdate,
          password: formData.password,
          joinDate: new Date().toISOString(),
          memberLevel: "V√†ng",
          points: 1250,
        };

        localStorage.setItem("userInfo", JSON.stringify(userInfo));
        console.log("üíæ ƒê√£ l∆∞u th√¥ng tin ƒëƒÉng k√Ω user:", userInfo);
      }

      // Ki·ªÉm tra n·∫øu c√≥ d·ªØ li·ªáu ƒëƒÉng k√Ω m·ªõi t·ª´ trang user
      function checkForNewRegistration() {
        const registrationData = JSON.parse(
          localStorage.getItem("newRegistration")
        );
        if (registrationData) {
          saveUserRegistrationData(registrationData);
          localStorage.removeItem("newRegistration");
          console.log("üîÑ ƒê√£ x·ª≠ l√Ω d·ªØ li·ªáu ƒëƒÉng k√Ω m·ªõi");
        }
      }

      // Ch·∫°y ki·ªÉm tra khi trang t·∫£i
      checkForNewRegistration();
    </script>
  <script src="js/data.js"></script>
  <script src="js/product-render.js"></script>

  <script src="js/product-details.js"></script>
  <script src="js/main.js"></script>
  </body>
</html>
