
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>ƒêƒÉng nh·∫≠p Watchsmember</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div id="account-area" style="display: none"></div>
    <div class="login-page-wrapper">
      <div class="login-container">
        <div class="login-form-area">
          <h1 class="title-main">ƒêƒÉng nh·∫≠p Watchsmember</h1>
          <form class="login-form">
            <div class="form-group">
              <label for="login-phone">S·ªë ƒëi·ªán tho·∫°i</label>
              <input
                type="tel"
                id="login-phone"
                class="login-phone"
                placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n"
              />
            </div>
            <div class="form-group">
              <label for="login-password">M·∫≠t kh·∫©u</label>
              <!-- th√™m class login-password -->
              <input
                type="password"
                id="login-password"
                class="login-password"
                placeholder="Nh·∫≠p m·∫≠t kh·∫©u c·ªßa b·∫°n"
              />
            </div>
            <button type="submit" class="btn-login">ƒêƒÉng nh·∫≠p</button>
          </form>

          <div class="social-login-section">
            <p>Ho·∫∑c ƒëƒÉng nh·∫≠p b·∫±ng</p>

            <div class="google-login-button-mock">
              <img
                src="https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw"
                alt="Google icon"
                class="google-icon"
              />
              Google
            </div>

            <div class="register">
              <span>B·∫°n ch∆∞a c√≥ t√†i kho·∫£n?</span>
              <!-- g·ªçi showRegisterOverlay() t·ª´ auth.js -->
              <button type="button" onclick="showRegisterOverlay()">
                ƒêƒÉng k√Ω ngay
              </button>
            </div>
          </div>
        </div>

        <!-- overlay: m·∫∑c ƒë·ªãnh ·∫©n (auth.js c≈©ng thao t√°c style display) -->
        <div>
          <div id="overlay" style="display: none">
            <div class="register-container">
              <div class="register-header">
                <h1>
                  ƒêƒÉng k√Ω tr·ªü th√†nh smember
                  <span style="color: #f39c12">WSMEMBER</span>
                </h1>
                <div class="header-logo">
                  <img
                    src="../image/logo.jpg"
                    width="200"
                    height="100"
                    alt="logo"
                  />
                </div>
                <div class="register-note">C√≥ th·ªÉ ƒëƒÉng k√Ω b·∫±ng t√†i kho·∫£n</div>
              </div>

              <div class="register-card">
                <div class="register-social">
                  <div class="register-btn-google" id="btnGoogle">
                    <img
                      src="https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw"
                      alt="G"
                      width="18"
                    />
                    <span>ƒêƒÉng k√Ω b·∫±ng Google</span>
                  </div>
                </div>

                <div class="register-divider">Ho·∫∑c ƒëi·ªÅn th√¥ng tin sau</div>

                <!-- ƒë·ªïi th√†nh class="register-form" (auth.js g·∫Øn s·ª± ki·ªán submit cho .register-form) -->
                <form class="register-form" novalidate>
                  <div class="register-grid">
                    <div class="register-form-group">
                      <label for="reg-fullname">H·ªç v√† t√™n</label>
                      <!-- th√™m class register-fullname -->
                      <input
                        type="text"
                        id="reg-fullname"
                        class="register-fullname"
                        placeholder="Nh·∫≠p h·ªç v√† t√™n"
                      />
                      <div class="register-error" id="errFullname">
                        Vui l√≤ng nh·∫≠p h·ªç v√† t√™n.
                      </div>
                    </div>

                    <div class="register-form-group">
                      <label for="reg-birthdate">Ng√†y sinh</label>
                      <!-- X√≥a max="" r·ªóng, ƒë·ªÉ tr·ªëng ho·∫∑c set ng√†y h·ª£p l·ªá -->
                      <input
                        type="date"
                        id="reg-birthdate"
                        class="register-birthdate"
                      />
                      <div class="register-error" id="errBirth">
                        Vui l√≤ng ch·ªçn ng√†y h·ª£p l·ªá.
                      </div>
                    </div>

                    <div class="register-form-group">
                      <label for="reg-phone">S·ªë ƒëi·ªán tho·∫°i</label>
                      <!-- class register-phone -->
                      <input
                        type="tel"
                        id="reg-phone"
                        class="register-phone"
                        placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"
                      />
                      <div class="register-error" id="errPhone">
                        S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá.
                      </div>
                    </div>

                    <div class="register-form-group">
                      <label for="reg-email">Email (kh√¥ng b·∫Øt bu·ªôc)</label>
                      <!-- class register-email -->
                      <input
                        type="email"
                        id="reg-email"
                        class="register-email"
                        placeholder="Nh·∫≠p email"
                      />
                      <div class="register-error" id="errEmail">
                        Email kh√¥ng h·ª£p l·ªá.
                      </div>
                    </div>

                    <div class="register-form-group">
                      <label for="reg-password">M·∫≠t kh·∫©u</label>
                      <!-- class register-password -->
                      <input
                        type="password"
                        id="reg-password"
                        class="register-password"
                        placeholder="Nh·∫≠p m·∫≠t kh·∫©u c·ªßa b·∫°n"
                      />
                      <div class="register-note">
                        M·∫≠t kh·∫©u t·ªëi thi·ªÉu 6 k√Ω t·ª±, c√≥ √≠t nh·∫•t 1 ch·ªØ s·ªë.
                      </div>
                      <div class="register-error" id="errPass">
                        M·∫≠t kh·∫©u ph·∫£i √≠t nh·∫•t 6 k√Ω t·ª±, c√≥ √≠t nh·∫•t 1 ch·ªØ s·ªë.
                      </div>
                    </div>

                    <div class="register-form-group">
                      <label for="reg-pconfirm">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u</label>
                      <!-- class register-confirm -->
                      <input
                        type="password"
                        id="reg-pconfirm"
                        class="register-confirm"
                        placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u c·ªßa b·∫°n"
                      />
                      <div class="register-error" id="errConfirm">
                        M·∫≠t kh·∫©u kh√¥ng kh·ªõp.
                      </div>
                    </div>
                  </div>

                  <div
                    style="
                      font-size: 12px;
                      color: #666;
                      margin-top: 12px;
                      text-align: center;
                    "
                  >
                    B·∫±ng vi·ªác ƒëƒÉng k√Ω, b·∫°n ƒë√£ ƒë·ªìng √Ω v·ªõi
                    <a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> v√†
                    <a href="#">Ch√≠nh s√°ch</a> c·ªßa Watchstore.
                  </div>

                  <div class="register-actions">
                    <!-- n√∫t quay l·∫°i l√† type=button ƒë·ªÉ kh√¥ng submit -->
                    <button
                      type="button"
                      class="register-btn-back"
                      onclick="hideRegisterOverlay()"
                    >
                      &#x2039; Quay l·∫°i ƒëƒÉng nh·∫≠p
                    </button>
                    <!-- n√∫t submit ƒë·ªÉ auth.js b·∫Øt s·ª± ki·ªán v√† g·ªçi handleRegister -->
                    <button
                      type="submit"
                      id="btnSubmit"
                      class="register-btn-submit"
                    >
                      Ho√†n t·∫•t ƒëƒÉng k√Ω
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <div class="profile-area"> 
          <div>
            <h2>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi Watchsmember!</h2>
            <p>Qu·∫£n l√Ω t√†i kho·∫£n v√† th√¥ng tin c√° nh√¢n c·ªßa b·∫°n t·∫°i ƒë√¢y.</p>
          </div>
          <div class="profile-details">
            <strong>T√™n ƒë·∫ßy ƒë·ªß:</strong> <span id="profile-fullname"></span><br />
            <strong>Email:</strong> <span id="profile-email"></span><br />
            <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span id="profile-phone"></span><br />
            <strong>Ng√†y sinh:</strong> <span id="profile-birthdate"></span><br />
          </div>
          <!-- N√∫t ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n -->
          <div class="profile-edit-form" id="profile-edit-form" style="display: none; margin-top: 20px;">
            <h3>Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n</h3>
            <form id="form-edit-profile">
              <div class="form-group">
                <label for="edit-fullname">H·ªç v√† t√™n</label>
                <input type="text" id="edit-fullname" />
              </div>
              <div class="form-group">
                <label for="edit-email">Email</label>
                <input type="email" id="edit-email" />
              </div>
              <div class="form-group">
                <label for="edit-phone">S·ªë ƒëi·ªán tho·∫°i</label>
                <input type="tel" id="edit-phone" />
              </div>
              <div class="form-group">
                <label for="edit-birthdate">Ng√†y sinh</label>
                <input type="date" id="edit-birthdate" max="" />
              </div>
              <button type="submit" class="btn-save-profile">L∆∞u thay ƒë·ªïi</button>
              <button type="button" class="btn-cancel-edit" id="btn-cancel-edit">H·ªßy</button>
            </form>
          </div>
          <!--end ch·ªânh s·ª≠a-->
          <div class="profile-bottom">
            <div class="btn-home" id="btn-home">V·ªÅ trang ch·ªß</div>
            <button type="button" id="btn-edit-profile">Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n</button>
            <div class="logout-button" id="logout-button">ƒêƒÉng xu·∫•t</div>
          </div>
        </div>

        <div class="benefits-area">
          <div class="header-logo">
            <img src="../image/logo.jpg" alt="logo" />
          </div>

          <h2 class="benefits-title">
            Gia nh·∫≠p th√†nh vi√™n c·ªßa <span class="highlight">watchstore</span>
            <br />
            ƒê·ªÉ kh√¥ng b·ªè l·ª° c√°c ∆∞u ƒë√£i h·∫•p d·∫´n
          </h2>

          <div class="benefits-box">
            <ul>
              <li>
                <i class="icon-gift">üéÅ</i> Chi·∫øt kh·∫•u ƒë·∫øn
                <strong>5%</strong> khi mua c√°c s·∫£n ph·∫©m t·∫°i Watchstore
              </li>
              <li>
                <i class="icon-delivery">üöö</i>
                <strong>Mi·ªÖn ph√≠ giao h√†ng</strong> cho th√†nh vi√™n WSMEMBER v√†
                cho ƒë∆°n h√†ng t·ª´ <strong>300.000ƒë</strong>
              </li>
              <li>
                <i class="icon-birthday">üéÇ</i>
                <strong>T·∫∑ng voucher sinh nh·∫≠t ƒë·∫øn 500.000ƒë</strong> cho kh√°ch
                h√†ng th√†nh vi√™n
              </li>
              <li>
                <i class="icon-exchange">üîÑ</i>
                <strong>Tr·ª£ gi√° thu c≈© ƒë·ªïi m·ªõi t·ªëi ƒëa 1 tri·ªáu</strong>
              </li>
              <li>
                <i class="icon-coupon">üéüÔ∏è</i>
                <strong>ThƒÉng h·∫°ng nh·∫≠n voucher ƒë·∫øn 300.000ƒë</strong>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <script src="../js/main.js"></script>
    <script>
      // Set max cho date
      const today = new Date().toISOString().split('T')[0];
      const regBirth = document.getElementById('reg-birthdate');
      if (regBirth) regBirth.setAttribute('max', today);

      // Helper l·∫•y / l∆∞u
      function getUsers() {
        try { return JSON.parse(localStorage.getItem("users")) || []; }
        catch { return []; }
      }
      function saveUsers(users) { localStorage.setItem("users", JSON.stringify(users)); }
      function getCurrentUser() {
        try { return JSON.parse(localStorage.getItem("currentUser")); }
        catch { return null; }
      }
      function saveCurrentUser(u) { localStorage.setItem("currentUser", JSON.stringify(u)); }

      // Hi·ªÉn th·ªã / ·∫©n khu v·ª±c
      function showProfileArea() {
        const area = document.querySelector('.profile-area');
        const loginArea = document.querySelector('.login-form-area');
        if (area) area.style.display = 'block';
        if (loginArea) loginArea.style.display = 'none';
        renderProfile(); // c·∫≠p nh·∫≠t n·ªôi dung
      }
      function hideProfileArea() {
        const area = document.querySelector('.profile-area');
        if (area) area.style.display = 'none';
        const loginArea = document.querySelector('.login-form-area');
        if (loginArea) loginArea.style.display = 'block';
      }

      // Render profile v√†o c√°c span c√≥ id t∆∞∆°ng ·ª©ng
      function renderProfile() {
        const user = getCurrentUser();
        if (!user || !user.isLoggedIn) {
          // n·∫øu kh√¥ng c√≥ user th√¨ ·∫©n profile
          hideProfileArea();
          return;
        }

        const elName = document.getElementById('profile-fullname');
        const elEmail = document.getElementById('profile-email');
        const elPhone = document.getElementById('profile-phone');
        const elBirth = document.getElementById('profile-birthdate');

        if (elName) elName.textContent = user.fullname || user.name || "Kh√¥ng c√≥ t√™n";
        if (elEmail) elEmail.textContent = (user.email && user.email !== "N/A") ? user.email : "Ch∆∞a c√≥";
        if (elPhone) elPhone.textContent = user.phone || "N/A";
        if (elBirth) elBirth.textContent = (user.birthdate && user.birthdate !== "N/A") ? user.birthdate : "Ch∆∞a c√≥";
      }

      // X·ª≠ l√Ω submit ƒëƒÉng nh·∫≠p: KH√îNG redirect, ch·ªâ hi·ªán profile-area
      const loginForm = document.querySelector('.login-form');
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const phone = (document.getElementById('login-phone').value || '').trim();
          const password = (document.getElementById('login-password').value || '');

          const users = getUsers();
          const user = users.find(u => u.phone === phone);

          if (user && user.locked) {
            alert("‚ùå T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ b·ªã kh√≥a. Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n!");
            return;
          }

          if (user && user.password === password) {
            // L∆∞u currentUser
            const userData = {
              isLoggedIn: true,
              fullname: user.fullname || user.name || "",
              name: user.name || user.fullname || "",
              email: user.email || "N/A",
              phone: user.phone,
              birthdate: user.birthdate || "N/A",
              password: user.password,
              loginTime: new Date().toISOString()
            };
            saveCurrentUser(userData);

            showLoginSuccess();   // hi·ªÉn th·ªã noti nh·ªè (tu·ª≥ b·∫°n)
            // Hi·ªÉn th·ªã profile-area thay v√¨ redirect
            setTimeout(() => {
              showProfileArea();
            }, 700); // ƒë·ªÉ ng∆∞·ªùi d√πng th·∫•y th√¥ng b√°o ng·∫Øn r·ªìi hi·ªán profile
          } else {
            alert("‚ùå S·ªë ƒëi·ªán tho·∫°i ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c!");
          }
        });
      }

      // X·ª≠ l√Ω ƒëƒÉng k√Ω (gi·ªØ logic ƒë√£ ch·ªânh, s·ª≠a l·ªói g)
      const registerForm = document.querySelector('.register-form');
      if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
          e.preventDefault();

          const fullname = (document.getElementById('reg-fullname').value || '').trim();
          const email = (document.getElementById('reg-email').value || '').trim();
          const phone = (document.getElementById('reg-phone').value || '').trim();
          const birthdate = document.getElementById('reg-birthdate').value;
          const password = document.getElementById('reg-password').value;
          const confirmPassword = document.getElementById('reg-pconfirm').value;

          if (password !== confirmPassword) {
            alert("‚ùå M·∫≠t kh·∫©u kh√¥ng kh·ªõp!");
            return;
          }
          if (!fullname || !phone || !password || !birthdate) {
            alert("‚ùå Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
            return;
          }

          const users = getUsers();
          const exists = users.find(u => u.phone === phone);
          if (exists) {
            alert("‚ùå S·ªë ƒëi·ªán tho·∫°i n√†y ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω. Vui l√≤ng d√πng s·ªë kh√°c ho·∫∑c ƒëƒÉng nh·∫≠p.");
            return;
          }

          const newUser = {
            name: fullname,
            fullname: fullname,
            email: email || "N/A",
            phone: phone,
            birthdate: birthdate,
            password: password,
            locked: false,
            createdAt: new Date().toISOString()
          };
          users.push(newUser);
          saveUsers(users);

          // Auto-login sau ƒëƒÉng k√Ω
          const userData = {
            isLoggedIn: true,
            fullname: newUser.fullname,
            name: newUser.name,
            email: newUser.email,
            phone: newUser.phone,
            birthdate: newUser.birthdate,
            password: newUser.password,
            loginTime: new Date().toISOString()
          };
          saveCurrentUser(userData);

          showRegisterSuccess();
          // Sau th√¥ng b√°o, hi·ªán profile-area (kh√¥ng redirect)
          setTimeout(() => {
            showProfileArea();
          }, 800);
        });
      }

      // C√°c h√†m noti (gi·ªØ nguy√™n)
      function showLoginSuccess() {
        const notification = document.createElement("div");
        notification.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: linear-gradient(135deg, #28a745, #20c997);
          color: white;
          padding: 22px 28px;
          border-radius: 12px;
          z-index: 10000;
          box-shadow: 0 10px 30px rgba(0,0,0,0.25);
          text-align: center;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        `;
        notification.innerHTML = `
          <div style="font-size: 36px; margin-bottom: 8px;">üéâ</div>
          <div style="font-size: 16px; font-weight: 700; margin-bottom: 6px;">ƒêƒÉng nh·∫≠p th√†nh c√¥ng!</div>
          <div style="font-size: 13px;">Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i</div>
        `;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 900);
      }

      function showRegisterSuccess() {
        const notification = document.createElement("div");
        notification.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: linear-gradient(135deg, #007bff, #0056b3);
          color: white;
          padding: 22px 28px;
          border-radius: 12px;
          z-index: 10000;
          box-shadow: 0 10px 30px rgba(0,0,0,0.25);
          text-align: center;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        `;
        notification.innerHTML = `
          <div style="font-size: 36px; margin-bottom: 8px;">‚ú®</div>
          <div style="font-size: 16px; font-weight: 700; margin-bottom: 6px;">ƒêƒÉng k√Ω th√†nh c√¥ng!</div>
          <div style="font-size: 13px;">B·∫°n ƒë√£ ƒë∆∞·ª£c ƒëƒÉng nh·∫≠p t·ª± ƒë·ªông</div>
        `;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 1000);
      }

      // N√∫t logout trong profile-area
      const logoutBtn = document.getElementById('logout-button');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          localStorage.removeItem('currentUser');
          // reload page v·ªÅ trang login hi·ªán t·∫°i
          location.reload();
        });
      }

      // N√∫t v·ªÅ trang ch·ªß
      const btnHome = document.getElementById('btn-home');
      if (btnHome) {
        btnHome.addEventListener('click', function() {
          // chuy·ªÉn v·ªÅ index (s·ª≠a ƒë∆∞·ªùng d·∫´n n·∫øu c·∫ßn)
          window.location.href = "../index.html";
        });
      }

      // Khi load trang: n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p th√¨ hi·ªán profile ngay
      document.addEventListener('DOMContentLoaded', function() {
        const cu = getCurrentUser();
        if (cu && cu.isLoggedIn) {
          showProfileArea();
        } else {
          hideProfileArea();
        }
      });
      function showProfileArea() {
        document.querySelector(".login-form-area").style.display = "none";
        document.querySelector(".benefits-area").style.display = "none";
        document.getElementById("overlay").style.display = "none";

        const profileArea = document.querySelector(".profile-area");
        profileArea.style.display = "block";

        // L·∫•y currentUser t·ª´ localStorage
        const cu = JSON.parse(localStorage.getItem("currentUser"));
        if (!cu) return;

        document.getElementById("profile-fullname").textContent = cu.fullname || "N/A";
        document.getElementById("profile-email").textContent = cu.email || "N/A";
        document.getElementById("profile-phone").textContent = cu.phone || "N/A";
        document.getElementById("profile-birthdate").textContent =
          cu.birthdate || "N/A";
      }
      function showLoginSuccess() {
      }
      // X·ª≠ l√Ω n√∫t Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n
      const btnEditProfile = document.getElementById("btn-edit-profile");
      const editForm = document.getElementById("profile-edit-form");
      const profileDetails = document.querySelector(".profile-details"); // khu v·ª±c hi·ªÉn th·ªã profile

      if (btnEditProfile && editForm && profileDetails) {
        editForm.style.display = "none"; // m·∫∑c ƒë·ªãnh ·∫©n

        btnEditProfile.addEventListener("click", function () {
          const currentUser = JSON.parse(localStorage.getItem("currentUser")) || {};

          // ƒêi·ªÅn d·ªØ li·ªáu hi·ªán t·∫°i v√†o form
          document.getElementById("edit-fullname").value = currentUser.fullname || "";
          document.getElementById("edit-email").value = currentUser.email && currentUser.email !== "N/A" ? currentUser.email : "";
          document.getElementById("edit-phone").value = currentUser.phone || "";
          document.getElementById("edit-birthdate").value = currentUser.birthdate && currentUser.birthdate !== "N/A" ? currentUser.birthdate : "";

          document.getElementById("edit-birthdate").setAttribute("max", new Date().toISOString().split('T')[0]);

          // ·∫®n profile details v√† n√∫t edit
          profileDetails.style.display = "none";
          btnEditProfile.style.display = "none";

          // Hi·ªÉn th·ªã form edit
          editForm.style.display = "block";
        });
      }

      // Khi nh·∫•n H·ªßy
      const btnCancelEdit = document.getElementById("btn-cancel-edit");
      if (btnCancelEdit && editForm && profileDetails && btnEditProfile) {
        btnCancelEdit.addEventListener("click", function () {
          editForm.style.display = "none";
          profileDetails.style.display = "block"; // hi·ªán l·∫°i profile
          btnEditProfile.style.display = "inline-block"; // hi·ªán l·∫°i n√∫t ch·ªânh s·ª≠a
        });
      }
      // X·ª≠ l√Ω submit form ch·ªânh s·ª≠a profile
      const editProfileForm = document.getElementById("form-edit-profile");
        if (editProfileForm) {
          editProfileForm.addEventListener("submit", function (e) {
            e.preventDefault(); // ngƒÉn reload

            // L·∫•y gi√° tr·ªã m·ªõi
            const newFullname = document.getElementById("edit-fullname").value.trim();
            const newEmail = document.getElementById("edit-email").value.trim() || "N/A";
            const newPhone = document.getElementById("edit-phone").value.trim();
            const newBirthdate = document.getElementById("edit-birthdate").value || "N/A";

            // C·∫≠p nh·∫≠t localStorage
            const currentUser = JSON.parse(localStorage.getItem("currentUser")) || {};
            currentUser.fullname = newFullname;
            currentUser.email = newEmail;
            currentUser.phone = newPhone;
            currentUser.birthdate = newBirthdate;
            localStorage.setItem("currentUser", JSON.stringify(currentUser));

            // C·∫≠p nh·∫≠t danh s√°ch users n·∫øu mu·ªën l∆∞u vƒ©nh vi·ªÖn
            const users = JSON.parse(localStorage.getItem("users")) || [];
            const idx = users.findIndex(u => u.phone === currentUser.phone);
            if (idx !== -1) {
              users[idx] = { ...users[idx], fullname: newFullname, email: newEmail, birthdate: newBirthdate };
              localStorage.setItem("users", JSON.stringify(users));
            }

            // Hi·ªÉn th·ªã l·∫°i profile v√† ·∫©n form
            document.querySelector(".profile-details").style.display = "block";
            document.getElementById("profile-edit-form").style.display = "none";
            document.getElementById("btn-edit-profile").style.display = "inline-block";

            // C·∫≠p nh·∫≠t giao di·ªán
            renderProfile();
            alert("‚úÖ Th√¥ng tin c√° nh√¢n ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t!");
          });
        }

    </script>

  </body>
</html>
